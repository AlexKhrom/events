{"remainingRequest":"/Users/mac/go/src/events/static/node_modules/thread-loader/dist/cjs.js!/Users/mac/go/src/events/static/node_modules/babel-loader/lib/index.js!/Users/mac/go/src/events/static/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/mac/go/src/events/static/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mac/go/src/events/static/src/components/ListEvents.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mac/go/src/events/static/src/components/ListEvents.vue","mtime":1660565438865},{"path":"/Users/mac/go/src/events/static/babel.config.js","mtime":1653650336335},{"path":"/Users/mac/go/src/events/static/node_modules/cache-loader/dist/cjs.js","mtime":1656160197065},{"path":"/Users/mac/go/src/events/static/node_modules/thread-loader/dist/cjs.js","mtime":1656160197065},{"path":"/Users/mac/go/src/events/static/node_modules/babel-loader/lib/index.js","mtime":1656160197672},{"path":"/Users/mac/go/src/events/static/node_modules/cache-loader/dist/cjs.js","mtime":1656160197065},{"path":"/Users/mac/go/src/events/static/node_modules/vue-loader/lib/index.js","mtime":1656160198005}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL1VzZXJzL21hYy9nby9zcmMvZXZlbnRzL3N0YXRpYy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vcmVnZW5lcmF0b3JSdW50aW1lLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9tYWMvZ28vc3JjL2V2ZW50cy9zdGF0aWMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3Vic3RyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZGF0ZS50by1pc28tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZGF0ZS50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5kYXRlLm5vdy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNvcnQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi50aW1lcnMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5qc29uLnN0cmluZ2lmeS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5lcnJvci50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IF9tb21lbnQgZnJvbSAibW9tZW50IjsKaW1wb3J0IEZvb3RlciBmcm9tICJAL2NvbXBvbmVudHMvRm9vdGVyIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJsaXN0RXZlbnRzIiwKICBjb21wb25lbnRzOiB7CiAgICBGb290ZXI6IEZvb3RlcgogIH0sCiAgZmlsdGVyczogewogICAgbW9tZW50OiBmdW5jdGlvbiBtb21lbnQoZGF0ZSkgewogICAgICByZXR1cm4gX21vbWVudChkYXRlKS5mb3JtYXQoIkQgTU1NTSIpOwogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGlzQ2hhbmdlRXZlbnQ6IGZhbHNlLAogICAgICBpc0NoYW5nZUV2ZW50V2l0aER1cmF0aW9uOiBmYWxzZSwKICAgICAgc3RhcnRFdmVudFRpbWU6IG51bGwsCiAgICAgIGVuZEV2ZW50VGltZTogbnVsbCwKICAgICAgZXZlbnRUb0NoYW5nZUlkOiAtMSwKICAgICAgdGltZVBpY2tlcjogIiIsCiAgICAgIHBlcmNlbnRPZkV2ZW50VGltZTogMCwKICAgICAgZGF0ZVBpY2tlcjogbmV3IERhdGUoRGF0ZS5ub3coKSAtIG5ldyBEYXRlKCkuZ2V0VGltZXpvbmVPZmZzZXQoKSAqIDYwMDAwKS50b0lTT1N0cmluZygpLnN1YnN0cigwLCAxMCkKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgZXZlbnRzQXJyYXk6IGZ1bmN0aW9uIGV2ZW50c0FycmF5KCkgewogICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLiRzdG9yZS5zdGF0ZS5ldmVudHMuc2xpY2UoKS5zb3J0KChhLCBiKSA9PgogICAgICAvLyAgICAgYS5kdCA8IGIuZHQgPyAxIDogLTEpKQogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuZXZlbnRzLnNsaWNlKCkuc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgICAgIHJldHVybiBhLmR0IDwgYi5kdCA/IDEgOiAtMTsKICAgICAgfSk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBkZWxldGVFdmVudDogZnVuY3Rpb24gZGVsZXRlRXZlbnQoaWQpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBpbmRleCA9IHRoaXMuZmluZEluZGV4RXZlbnRzKGlkKTsKICAgICAgdmFyIGV2ZW50ID0gdGhpcy4kc3RvcmUuc3RhdGUuZXZlbnRzW2luZGV4XTsgLy8gY29uc29sZS5sb2coImluZGV4ID0gIiwgaW5kZXgpCiAgICAgIC8vIGNvbnNvbGUubG9nKHtldmVudH0pCgogICAgICB2YXIgd2FpdFNlY29uZHMgPSAzOwogICAgICBldmVudC53YWl0U2Vjb25kcyA9IHdhaXRTZWNvbmRzOwogICAgICB2YXIgaW50ZXJ2YWxJZCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoIWV2ZW50LmRlbGV0ZWQpIHsKICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWxJZCk7CiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZXZlbnRzJywgSlNPTi5zdHJpbmdpZnkoX3RoaXMuJHN0b3JlLnN0YXRlLmV2ZW50cykpOwoKICAgICAgICAgIF90aGlzLiRmb3JjZVVwZGF0ZSgpOwoKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmICgtLXdhaXRTZWNvbmRzIDwgMCkgewogICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbElkKTsKCiAgICAgICAgICB2YXIgX2luZGV4ID0gX3RoaXMuZmluZEluZGV4RXZlbnRzKGlkKTsKCiAgICAgICAgICBfdGhpcy5kZWxldGVFdmVudEZyb21CRChpZCk7CgogICAgICAgICAgX3RoaXMuJHN0b3JlLnN0YXRlLmV2ZW50cy5zcGxpY2UoX2luZGV4LCAxKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZXZlbnQud2FpdFNlY29uZHMgPSB3YWl0U2Vjb25kczsKICAgICAgICB9CgogICAgICAgIF90aGlzLiRmb3JjZVVwZGF0ZSgpOwogICAgICB9LCAxMDAwKTsgLy8gdGhpcy4kc3RvcmUuc3RhdGUuZXZlbnRzLnNwbGljZShpbmRleCwgMSkKCiAgICAgIGV2ZW50LmRlbGV0ZWQgPSBEYXRlLm5vdygpOwogICAgICB0aGlzLiRmb3JjZVVwZGF0ZSgpOwogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZXZlbnRzJywgSlNPTi5zdHJpbmdpZnkodGhpcy4kc3RvcmUuc3RhdGUuZXZlbnRzKSk7CiAgICB9LAogICAgY2FtZWJhY2tFdmVudDogZnVuY3Rpb24gY2FtZWJhY2tFdmVudChpZCkgewogICAgICB2YXIgaW5kZXggPSB0aGlzLmZpbmRJbmRleEV2ZW50cyhpZCk7CiAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmV2ZW50c1tpbmRleF0uZGVsZXRlZCA9IDA7CiAgICAgIHRoaXMuJGZvcmNlVXBkYXRlKCk7CiAgICB9LAogICAgY2hhbmdlRXZlbnQ6IGZ1bmN0aW9uIGNoYW5nZUV2ZW50KGlkKSB7CiAgICAgIHZhciBpbmRleCA9IHRoaXMuZmluZEluZGV4RXZlbnRzKGlkKTsKICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSh0aGlzLiRzdG9yZS5zdGF0ZS5ldmVudHNbaW5kZXhdLmR0KTsKICAgICAgdGhpcy5zZWxlY3RlZEV2ZW50SW5kZXggPSBpbmRleDsKCiAgICAgIGlmICh0aGlzLiRzdG9yZS5zdGF0ZS5ldmVudHNbaW5kZXhdLnRpbWVFbmQgIT09IDApIHsKICAgICAgICB2YXIgd2FzRGF0ZVN0YXJ0ID0gbmV3IERhdGUodGhpcy4kc3RvcmUuc3RhdGUuZXZlbnRzW2luZGV4XS50aW1lU3RhcnQpOwogICAgICAgIHZhciB3YXNEYXRlRW5kID0gbmV3IERhdGUodGhpcy4kc3RvcmUuc3RhdGUuZXZlbnRzW2luZGV4XS50aW1lRW5kKTsKICAgICAgICB0aGlzLnN0YXJ0RXZlbnRUaW1lID0gdGhpcy5tYWtlSG91cnNBbmRNaW51dGVzU3RyKHdhc0RhdGVTdGFydCk7CiAgICAgICAgdGhpcy5lbmRFdmVudFRpbWUgPSB0aGlzLm1ha2VIb3Vyc0FuZE1pbnV0ZXNTdHIod2FzRGF0ZUVuZCk7CiAgICAgICAgdGhpcy5kYXRlUGlja2VyID0gbmV3IERhdGUoZGF0ZSAtIG5ldyBEYXRlKCkuZ2V0VGltZXpvbmVPZmZzZXQoKSAqIDYwMDAwKS50b0lTT1N0cmluZygpLnN1YnN0cigwLCAxMCk7CiAgICAgICAgY29uc29sZS5sb2codGhpcy5zdGFydEV2ZW50VGltZSk7CiAgICAgICAgY29uc29sZS5sb2codGhpcy5lbmRFdmVudFRpbWUpOwogICAgICAgIHRoaXMuaXNDaGFuZ2VFdmVudFdpdGhEdXJhdGlvbiA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy50aW1lUGlja2VyID0gdGhpcy5tYWtlSG91cnNBbmRNaW51dGVzU3RyKGRhdGUpOwogICAgICAgIHRoaXMuZGF0ZVBpY2tlciA9IG5ldyBEYXRlKGRhdGUgLSBuZXcgRGF0ZSgpLmdldFRpbWV6b25lT2Zmc2V0KCkgKiA2MDAwMCkudG9JU09TdHJpbmcoKS5zdWJzdHIoMCwgMTApOwogICAgICAgIHRoaXMuaXNDaGFuZ2VFdmVudCA9IHRydWU7CiAgICAgICAgdGhpcy4kZm9yY2VVcGRhdGUoKTsKICAgICAgfQogICAgfSwKICAgIHNhdmVFdmVudFdpdGhEdXJhdGlvbkNoYW5nZXM6IGZ1bmN0aW9uIHNhdmVFdmVudFdpdGhEdXJhdGlvbkNoYW5nZXMoKSB7CiAgICAgIHZhciBzdGFydERhdGUgPSB0aGlzLm1ha2VEYXRlKHRoaXMuZGF0ZVBpY2tlciwgdGhpcy5zdGFydEV2ZW50VGltZSk7IC8vIGxldCBzdGFydERhdGUgPSBuZXcgRGF0ZSh0aGlzLmRhdGVQaWNrZXIgKyAiVCIgKyB0aGlzLnN0YXJ0RXZlbnRUaW1lKQoKICAgICAgdmFyIGVuZERhdGUgPSB0aGlzLm1ha2VEYXRlKHRoaXMuZGF0ZVBpY2tlciwgdGhpcy5lbmRFdmVudFRpbWUpOyAvLyBsZXQgZW5kRGF0ZSA9IG5ldyBEYXRlKHRoaXMuZGF0ZVBpY2tlciArICJUIiArIHRoaXMuZW5kRXZlbnRUaW1lKQoKICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuZXZlbnRzW3RoaXMuc2VsZWN0ZWRFdmVudEluZGV4XS50aW1lU3RhcnQgPSBzdGFydERhdGUuZ2V0VGltZSgpICsgdGhpcy4kc3RvcmUuc3RhdGUuZXZlbnRzW3RoaXMuc2VsZWN0ZWRFdmVudEluZGV4XS5kdCAlIDEwMDA7CiAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmV2ZW50c1t0aGlzLnNlbGVjdGVkRXZlbnRJbmRleF0udGltZUVuZCA9IGVuZERhdGUuZ2V0VGltZSgpICsgdGhpcy4kc3RvcmUuc3RhdGUuZXZlbnRzW3RoaXMuc2VsZWN0ZWRFdmVudEluZGV4XS5kdCAlIDEwMDA7CiAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmV2ZW50c1t0aGlzLnNlbGVjdGVkRXZlbnRJbmRleF0uZHQgPSB0aGlzLiRzdG9yZS5zdGF0ZS5ldmVudHNbdGhpcy5zZWxlY3RlZEV2ZW50SW5kZXhdLnRpbWVTdGFydDsKICAgICAgdGhpcy5jaGFuZ2VFdmVudEZyb21CRCh0aGlzLiRzdG9yZS5zdGF0ZS5ldmVudHNbdGhpcy5zZWxlY3RlZEV2ZW50SW5kZXhdKTsKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2V2ZW50cycsIEpTT04uc3RyaW5naWZ5KHRoaXMuJHN0b3JlLnN0YXRlLmV2ZW50cykpOwogICAgICB0aGlzLmlzQ2hhbmdlRXZlbnRXaXRoRHVyYXRpb24gPSBmYWxzZTsKICAgICAgdGhpcy5zb3J0RXZlbnRzKCk7CiAgICB9LAogICAgc2F2ZUV2ZW50Q2hhbmdlczogZnVuY3Rpb24gc2F2ZUV2ZW50Q2hhbmdlcygpIHsKICAgICAgdmFyIGRhdGUgPSB0aGlzLm1ha2VEYXRlKHRoaXMuZGF0ZVBpY2tlciwgdGhpcy50aW1lUGlja2VyKTsgLy8gbGV0IGRhdGUgPSBuZXcgRGF0ZSh0aGlzLmRhdGVQaWNrZXIgKyAiVCIgKyB0aGlzLnRpbWVQaWNrZXIpCgogICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5ldmVudHNbdGhpcy5zZWxlY3RlZEV2ZW50SW5kZXhdLmR0ID0gZGF0ZS5nZXRUaW1lKCkgKyB0aGlzLiRzdG9yZS5zdGF0ZS5ldmVudHNbdGhpcy5zZWxlY3RlZEV2ZW50SW5kZXhdLmR0ICUgMTAwMDsKICAgICAgdGhpcy5jaGFuZ2VFdmVudEZyb21CRCh0aGlzLiRzdG9yZS5zdGF0ZS5ldmVudHNbdGhpcy5zZWxlY3RlZEV2ZW50SW5kZXhdKTsKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2V2ZW50cycsIEpTT04uc3RyaW5naWZ5KHRoaXMuJHN0b3JlLnN0YXRlLmV2ZW50cykpOwogICAgICB0aGlzLmlzQ2hhbmdlRXZlbnQgPSBmYWxzZTsKICAgICAgdGhpcy5zb3J0RXZlbnRzKCk7CiAgICB9LAogICAgY2FsY1RpbWVQZXJjZW50OiBmdW5jdGlvbiBjYWxjVGltZVBlcmNlbnQoaW5kZXgpIHsKICAgICAgaWYgKHRoaXMuJHN0b3JlLnN0YXRlLmV2ZW50c1tpbmRleF0udGltZUVuZCA9PT0gMCkgewogICAgICAgIHJldHVybiAxMDA7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLiRzdG9yZS5zdGF0ZS5ldmVudHNbaW5kZXhdLnRpbWVFbmQgLSB0aGlzLiRzdG9yZS5zdGF0ZS5ldmVudHNbaW5kZXhdLnRpbWVTdGFydCA8PSAwKSByZXR1cm4gMDsKICAgICAgdmFyIHRpbWVGb3JEYXkgPSAwOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmV2ZW50c0FycmF5Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKG5ldyBEYXRlKHRoaXMuJHN0b3JlLnN0YXRlLmV2ZW50c1tpXS5kdCkuZ2V0RGF0ZSgpID09PSBuZXcgRGF0ZSh0aGlzLiRzdG9yZS5zdGF0ZS5ldmVudHNbaW5kZXhdLmR0KS5nZXREYXRlKCkgJiYgdGhpcy4kc3RvcmUuc3RhdGUuZXZlbnRzW2ldLnRpbWVTdGFydCAhPT0gMCkgewogICAgICAgICAgdGltZUZvckRheSArPSB0aGlzLiRzdG9yZS5zdGF0ZS5ldmVudHNbaV0udGltZUVuZCAtIHRoaXMuJHN0b3JlLnN0YXRlLmV2ZW50c1tpXS50aW1lU3RhcnQ7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5wZXJjZW50T2ZFdmVudFRpbWUgPSAodGhpcy4kc3RvcmUuc3RhdGUuZXZlbnRzW2luZGV4XS50aW1lRW5kIC0gdGhpcy4kc3RvcmUuc3RhdGUuZXZlbnRzW2luZGV4XS50aW1lU3RhcnQpIC8gdGltZUZvckRheSAqIDEwMDsKICAgIH0sCiAgICBnZXRFdmVudHM6IGZ1bmN0aW9uIGdldEV2ZW50cygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciByZXNwb25zZSwgZXZlbnRzOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIGZldGNoKCcvYXBpL2dldEV2ZW50cycsIHsKICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICBldmVudHMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgX3RoaXMyLiRzdG9yZS5zdGF0ZS5ldmVudHMgPSBldmVudHM7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhfdGhpczIuJHN0b3JlLnN0YXRlLmV2ZW50cyk7CgogICAgICAgICAgICAgICAgX3RoaXMyLnNvcnRFdmVudHMoKTsKCiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZXZlbnRzJywgSlNPTi5zdHJpbmdpZnkoX3RoaXMyLiRzdG9yZS5zdGF0ZS5ldmVudHMpKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJva2trayIpOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE1OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID4gMjk5ICYmIHJlc3BvbnNlLnN0YXR1cyA8IDUwMCkgewogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiZXJyIik7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLnN0YXR1cyA+IDUwMCkgewogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygic29tZSB3cm9uZyBvbiBiYWNrZW5kIik7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgY2hhbmdlRXZlbnRGcm9tQkQ6IGZ1bmN0aW9uIGNoYW5nZUV2ZW50RnJvbUJEKGV2ZW50KSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIHJlc3BvbnNlOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gZmV0Y2goJy9hcGkvY2hhbmdlRXZlbnQnLCB7CiAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsCiAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGV2ZW50KQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQyLnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7CiAgICAgICAgICAgICAgICAgIC8vINC10YHQu9C4IEhUVFAt0YHRgtCw0YLRg9GBINCyINC00LjQsNC/0LDQt9C+0L3QtSAyMDAtMjk5CiAgICAgICAgICAgICAgICAgIC8vINC/0L7Qu9GD0YfQsNC10Lwg0YLQtdC70L4g0L7RgtCy0LXRgtCwICjRgdC8LiDQv9GA0L4g0Y3RgtC+0YIg0LzQtdGC0L7QtCDQvdC40LbQtSkKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coX3RoaXMzLiRzdG9yZS5zdGF0ZS5ldmVudHMpOwoKICAgICAgICAgICAgICAgICAgX3RoaXMzLnNvcnRFdmVudHMoKTsKCiAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdldmVudHMnLCBKU09OLnN0cmluZ2lmeShfdGhpczMuJHN0b3JlLnN0YXRlLmV2ZW50cykpOwogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygib2tra2siKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2Uuc3RhdHVzID4gMjk5ICYmIHJlc3BvbnNlLnN0YXR1cyA8IDUwMCkgewogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiZXJyIik7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLnN0YXR1cyA+IDUwMCkgewogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygic29tZSB3cm9uZyBvbiBiYWNrZW5kIik7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGRlbGV0ZUV2ZW50RnJvbUJEOiBmdW5jdGlvbiBkZWxldGVFdmVudEZyb21CRChpZCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHZhciByZXNwb25zZTsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIGZldGNoKCcvYXBpL2RlbGV0ZUV2ZW50JywgewogICAgICAgICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnLAogICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGlkCiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDMuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHsKICAgICAgICAgICAgICAgICAgLy8g0LXRgdC70LggSFRUUC3RgdGC0LDRgtGD0YEg0LIg0LTQuNCw0L/QsNC30L7QvdC1IDIwMC0yOTkKICAgICAgICAgICAgICAgICAgLy8g0L/QvtC70YPRh9Cw0LXQvCDRgtC10LvQviDQvtGC0LLQtdGC0LAgKNGB0LwuINC/0YDQviDRjdGC0L7RgiDQvNC10YLQvtC0INC90LjQttC1KQogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhfdGhpczQuJHN0b3JlLnN0YXRlLmV2ZW50cyk7CgogICAgICAgICAgICAgICAgICBfdGhpczQuc29ydEV2ZW50cygpOwoKICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2V2ZW50cycsIEpTT04uc3RyaW5naWZ5KF90aGlzNC4kc3RvcmUuc3RhdGUuZXZlbnRzKSk7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJva2trayIpOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5zdGF0dXMgPiAyOTkgJiYgcmVzcG9uc2Uuc3RhdHVzIDwgNTAwKSB7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJlcnIiKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2Uuc3RhdHVzID4gNTAwKSB7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJzb21lIHdyb25nIG9uIGJhY2tlbmQiKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgYm9yZGVyQ29sb3JGb3JFdmVudDogZnVuY3Rpb24gYm9yZGVyQ29sb3JGb3JFdmVudChpbmRleCkgewogICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLiRzdG9yZS5zdGF0ZS5ldmVudHNbaW5kZXhdLnRpbWVTdGFydCA9PT0gdW5kZWZpbmVkID8gImJsdWUiIDogImdyZWVuIikKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmV2ZW50c1tpbmRleF0udGltZVN0YXJ0ID09PSAwID8gIm5vbmUiIDogImdyZWVuIjsgLy9yZ2IoNDcsMTAxLDE4NiktYmx1ZQogICAgfSwKICAgIHNvcnRFdmVudHM6IGZ1bmN0aW9uIHNvcnRFdmVudHMoKSB7CiAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmV2ZW50cyA9IHRoaXMuJHN0b3JlLnN0YXRlLmV2ZW50cy5zbGljZSgpLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICByZXR1cm4gYS5kdCA8IGIuZHQgPyAxIDogLTE7CiAgICAgIH0pOwogICAgfSwKICAgIGlzTmV3RGF5OiBmdW5jdGlvbiBpc05ld0RheShpbmRleCkgewogICAgICBpZiAoaW5kZXggPT09IDApIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQoKICAgICAgY29uc29sZS5sb2coaW5kZXgsIG5ldyBEYXRlKHRoaXMuZXZlbnRzQXJyYXlbaW5kZXggLSAxXS5kdCkuZ2V0RGF0ZSgpLCBuZXcgRGF0ZSh0aGlzLmV2ZW50c0FycmF5W2luZGV4XS5kdCkuZ2V0RGF0ZSgpKTsKICAgICAgcmV0dXJuIG5ldyBEYXRlKHRoaXMuZXZlbnRzQXJyYXlbaW5kZXggLSAxXS5kdCkuZ2V0RGF0ZSgpICE9PSBuZXcgRGF0ZSh0aGlzLmV2ZW50c0FycmF5W2luZGV4XS5kdCkuZ2V0RGF0ZSgpOwogICAgfSwKICAgIHByaW50RXZlbnREdXJhdGlvbjogZnVuY3Rpb24gcHJpbnRFdmVudER1cmF0aW9uKGV2ZW50KSB7CiAgICAgIHZhciBob3VycyA9IE1hdGguZmxvb3IoKGV2ZW50LnRpbWVFbmQgLSBldmVudC50aW1lU3RhcnQpIC8gMzYwMDAwMCk7CiAgICAgIHZhciBtaW51dGVzID0gTWF0aC5mbG9vcigoZXZlbnQudGltZUVuZCAtIGV2ZW50LnRpbWVTdGFydCkgJSAzNjAwMDAwIC8gNjAwMDApOwogICAgICBtaW51dGVzID0gbWludXRlcy50b1N0cmluZygpLmxlbmd0aCA9PT0gMSA/ICcwJyArIG1pbnV0ZXMgOiBtaW51dGVzOwogICAgICByZXR1cm4gaG91cnMgKyAiOiIgKyBtaW51dGVzOwogICAgfSwKICAgIGdldEhvdXJBbmRNaW51dGVzOiBmdW5jdGlvbiBnZXRIb3VyQW5kTWludXRlcyhldmVudCkgewogICAgICAvLyBsZXQgaG91ciA9IG1vbWVudChldmVudC5kdCkuaG91cigpCiAgICAgIC8vIGxldCBtaW51dGVzID0gbW9tZW50KGV2ZW50LmR0KS5taW51dGVzKCkudG9TdHJpbmcoKS5sZW5ndGggPT09IDEgPyAiMCIgKyBtb21lbnQoZXZlbnQuZHQpLm1pbnV0ZXMoKSA6IG1vbWVudChldmVudC5kdCkubWludXRlcygpCiAgICAgIGlmIChldmVudC50aW1lRW5kID09PSAwIHx8IGV2ZW50LnRpbWVFbmQgPT09IHVuZGVmaW5lZCkgewogICAgICAgIHJldHVybiB0aGlzLm1ha2VIb3Vyc0FuZE1pbnV0ZXNTdHIobmV3IERhdGUoZXZlbnQuZHQpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gdGhpcy5tYWtlSG91cnNBbmRNaW51dGVzU3RyKG5ldyBEYXRlKGV2ZW50LmR0KSkgKyAiIC0gIiArIHRoaXMubWFrZUhvdXJzQW5kTWludXRlc1N0cihuZXcgRGF0ZShldmVudC50aW1lRW5kKSk7CiAgICAgIH0KICAgIH0sCiAgICBnZXRFbmRPZkV2ZW50U3RyOiBmdW5jdGlvbiBnZXRFbmRPZkV2ZW50U3RyKGV2ZW50KSB7CiAgICAgIHJldHVybiB0aGlzLm1ha2VIb3Vyc0FuZE1pbnV0ZXNTdHIobmV3IERhdGUoZXZlbnQudGltZUVuZCkpOwogICAgfSwKICAgIG1ha2VIb3Vyc0FuZE1pbnV0ZXNTdHI6IGZ1bmN0aW9uIG1ha2VIb3Vyc0FuZE1pbnV0ZXNTdHIoZGF0ZSkgewogICAgICB2YXIgaG91cnMgPSBkYXRlLmdldEhvdXJzKCk7CiAgICAgIHZhciBtaW51dGVzID0gZGF0ZS5nZXRNaW51dGVzKCk7CiAgICAgIGhvdXJzID0gaG91cnMudG9TdHJpbmcoKS5sZW5ndGggPT09IDEgPyAnMCcgKyBob3VycyA6IGhvdXJzOwogICAgICBtaW51dGVzID0gbWludXRlcy50b1N0cmluZygpLmxlbmd0aCA9PT0gMSA/ICcwJyArIG1pbnV0ZXMgOiBtaW51dGVzOwogICAgICByZXR1cm4gaG91cnMgKyAnOicgKyBtaW51dGVzOwogICAgfSwKICAgIG1ha2VEYXRlOiBmdW5jdGlvbiBtYWtlRGF0ZShkYXRlLCB0aW1lLCBzZWNvbmRzLCBtaWxsaXNlY29uZHMpIHsKICAgICAgZGF0ZSA9IGRhdGUgPT09IHVuZGVmaW5lZCA/ICIiIDogZGF0ZTsKICAgICAgdGltZSA9IHRpbWUgPT09IHVuZGVmaW5lZCA/ICIiIDogIlQiICsgdGltZTsKCiAgICAgIGlmIChzZWNvbmRzICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBzZWNvbmRzID0gc2Vjb25kcy5sZW5ndGggPT09IDEgPyAnMCcgKyBzZWNvbmRzIDogc2Vjb25kczsKICAgICAgfQoKICAgICAgc2Vjb25kcyA9IHNlY29uZHMgPT09IHVuZGVmaW5lZCA/ICIiIDogIjoiICsgc2Vjb25kczsKICAgICAgbWlsbGlzZWNvbmRzID0gbWlsbGlzZWNvbmRzID09PSB1bmRlZmluZWQgPyAiIiA6ICIuIiArIG1pbGxpc2Vjb25kczsKICAgICAgY29uc29sZS5sb2coIm1ha2UgRGF0ZSA9ICIsIGRhdGUgKyB0aW1lICsgc2Vjb25kcyArIG1pbGxpc2Vjb25kcyk7CiAgICAgIHJldHVybiBuZXcgRGF0ZShkYXRlICsgdGltZSArIHNlY29uZHMgKyBtaWxsaXNlY29uZHMpOwogICAgfSwKICAgIGZpbmRJbmRleEV2ZW50czogZnVuY3Rpb24gZmluZEluZGV4RXZlbnRzKGlkKSB7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy4kc3RvcmUuc3RhdGUuZXZlbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKHRoaXMuJHN0b3JlLnN0YXRlLmV2ZW50c1tpXS5pZCA9PT0gaWQpIHsKICAgICAgICAgIHJldHVybiBpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIC0xOwogICAgfQogIH0sCiAgYmVmb3JlTW91bnQ6IGZ1bmN0aW9uIGJlZm9yZU1vdW50KCkgewogICAgdGhpcy5nZXRFdmVudHMoKTsKICB9Cn07"},{"version":3,"mappings":"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","names":["name","components","Footer","filters","moment","date","data","isChangeEvent","isChangeEventWithDuration","startEventTime","endEventTime","eventToChangeId","timePicker","percentOfEventTime","datePicker","computed","eventsArray","a","methods","deleteEvent","id","event","clearInterval","localStorage","camebackEvent","changeEvent","console","saveEventWithDurationChanges","saveEventChanges","calcTimePercent","index","timeForDay","getEvents","fetch","method","response","events","changeEventFromBD","body","deleteEventFromBD","borderColorForEvent","sortEvents","isNewDay","printEventDuration","minutes","getHourAndMinutes","getEndOfEventStr","makeHoursAndMinutesStr","hours","makeDate","time","seconds","milliseconds","findIndexEvents","beforeMount"],"sourceRoot":"src/components","sources":["ListEvents.vue"],"sourcesContent":["<!--evets = []event{-->\n<!--  dt: date of creat event-->\n<!--  title: name of event-->\n<!--  timeStart: date of start doing smth-->\n<!--  timeEnd: date of finish doing smth-->\n<!--}-->\n<template>\n  <div>\n    <template v-if=\"isChangeEvent\">\n      <div class=\"picker\" @click=\"isChangeEvent=false\">\n        <div class=\"picker__content\" @click.stop>\n          <slot>\n            <v-row justify=\"space-around\">\n              <v-col>\n                <v-time-picker\n                    format=\"24hr\"\n                    v-model=\"timePicker\"\n                ></v-time-picker>\n              </v-col>\n              <v-col>\n                <v-date-picker\n                    v-model=\"datePicker\"\n                    color=\"primary lighten-1\"\n                ></v-date-picker>\n              </v-col>\n              <v-col>\n                <v-btn class=\"mb-4\" width=\"290px\"\n                       @click=\"saveEventChanges\"\n                       color=\"white\">save\n                </v-btn>\n              </v-col>\n            </v-row>\n          </slot>\n        </div>\n      </div>\n    </template>\n\n    <template v-if=\"isChangeEventWithDuration\">\n      <div class=\"picker\" @click=\"isChangeEventWithDuration=false\">\n        <div class=\"picker__content\" @click.stop>\n          <slot>\n            <div>\n              <h1>Change your event:</h1>\n              <v-row\n                  justify=\"space-around\"\n                  align=\"center\"\n              >\n                <v-col style=\"width: 350px; flex: 0 1 auto;\">\n                  <h2>Start:</h2>\n                  <v-time-picker\n                      format=\"24hr\"\n                      v-model=\"startEventTime\"\n                      :max=\"endEventTime\"\n                  ></v-time-picker>\n                </v-col>\n                <v-col style=\"width: 350px; flex: 0 1 auto;\">\n                  <h2>End:</h2>\n                  <v-time-picker\n                      format=\"24hr\"\n                      v-model=\"endEventTime\"\n                      :min=\"startEventTime\"\n                  ></v-time-picker>\n                </v-col>\n                <v-col>\n                  <v-date-picker\n                      v-model=\"datePicker\"\n                      color=\"primary lighten-1\"\n                  ></v-date-picker>\n                </v-col>\n                <v-col>\n                  <v-btn class=\"mb-2\" width=\"290px\"\n                         @click=\"saveEventWithDurationChanges\"\n                         height=\"50px\"\n                         color=\"white\">save\n                  </v-btn>\n                </v-col>\n              </v-row>\n            </div>\n          </slot>\n        </div>\n      </div>\n    </template>\n\n\n    <div v-for=\"(event,index) in this.$store.state.events\"\n         :key=\"event.id\"\n    >\n      <div v-if=\"isNewDay(index)\" style=\"margin-top: 20px;color: #555555\">{{ new Date(event.dt) | moment }}</div>\n      <div\n          style=\"display: flex;justify-content: space-between;margin-top: 20px;padding:5px;\">\n        <div>\n          <div :style=\"event.deleted?'opacity: 0.5':''\"\n               style=\"font-size: 18px;text-transform: capitalize;display: flex;align-items: center;\">{{ event.title }}\n          </div>\n          <span v-if=\"!event.deleted\" style=\"color: #555;font-size: 11px;display: block\">{{\n              getHourAndMinutes(event)\n            }}</span>\n        </div>\n        <div>\n          <span v-if=\"event.deleted\" style=\"color: #555;font-size: 12px;padding-right: 10px\">{{\n              event.waitSeconds\n            }}с</span>\n          <span v-if=\"event.timeStart!==0&&event.timeStart!==undefined&&!event.deleted\" style=\"color: #555;font-size: 14px;\">\n            {{ printEventDuration(event) }}\n          </span>\n          <v-btn v-if=\"!event.deleted\" @click=\"changeEvent(event.id)\" icon>✏️</v-btn>\n          <v-btn v-if=\"event.deleted\" @click=\"camebackEvent(event.id)\" text small>вернуть ↩︎</v-btn>\n          <v-btn v-else @click=\"deleteEvent(event.id)\" icon>🗑</v-btn>\n        </div>\n      </div>\n      <div :style=\"{border: '2px solid '+borderColorForEvent(index),width: calcTimePercent(index) +'%'}\"\n      ></div>\n    </div>\n    <Footer >\n\n    </Footer>\n  </div>\n</template>\n\n<script>\nimport moment from \"moment\";\nimport Footer from \"@/components/Footer\";\n\n\nexport default {\n  name: \"listEvents\",\n  components: {Footer},\n  filters: {\n    moment(date) {\n      return moment(date).format(\"D MMMM\");\n    },\n  },\n  data() {\n    return {\n      isChangeEvent: false,\n      isChangeEventWithDuration: false,\n      startEventTime: null,\n      endEventTime: null,\n      eventToChangeId: -1,\n      timePicker: \"\",\n      percentOfEventTime: 0,\n      datePicker: (new Date(Date.now() - (new Date()).getTimezoneOffset() * 60000)).toISOString().substr(0, 10),\n\n    }\n  },\n  computed: {\n    eventsArray() {\n      // console.log(this.$store.state.events.slice().sort((a, b) =>\n      //     a.dt < b.dt ? 1 : -1))\n      return this.$store.state.events.slice().sort((a, b) =>\n          a.dt < b.dt ? 1 : -1)\n    }\n  },\n  methods: {\n    deleteEvent(id) {\n      let index = this.findIndexEvents(id)\n      let event = this.$store.state.events[index]\n\n      // console.log(\"index = \", index)\n      // console.log({event})\n\n      let waitSeconds = 3\n      event.waitSeconds = waitSeconds\n      let intervalId = setInterval(() => {\n        if (!event.deleted) {\n          clearInterval(intervalId)\n          localStorage.setItem('events', JSON.stringify(this.$store.state.events))\n          this.$forceUpdate()\n          return\n        }\n        if (--waitSeconds < 0) {\n          clearInterval(intervalId);\n          let index = this.findIndexEvents(id)\n          this.deleteEventFromBD(id)\n          this.$store.state.events.splice(index, 1)\n        } else {\n          event.waitSeconds = waitSeconds\n        }\n        this.$forceUpdate()\n      }, 1000);\n\n      // this.$store.state.events.splice(index, 1)\n\n      event.deleted = Date.now();\n      this.$forceUpdate();\n      localStorage.setItem('events', JSON.stringify(this.$store.state.events))\n    },\n    camebackEvent(id) {\n      let index = this.findIndexEvents(id)\n      this.$store.state.events[index].deleted = 0\n      this.$forceUpdate();\n    },\n    changeEvent(id) {\n      let index = this.findIndexEvents(id)\n      let date = new Date(this.$store.state.events[index].dt)\n      this.selectedEventIndex = index\n      if (this.$store.state.events[index].timeEnd !== 0) {\n        let wasDateStart = new Date(this.$store.state.events[index].timeStart)\n        let wasDateEnd = new Date(this.$store.state.events[index].timeEnd)\n\n        this.startEventTime = this.makeHoursAndMinutesStr(wasDateStart)\n        this.endEventTime = this.makeHoursAndMinutesStr(wasDateEnd)\n        this.datePicker = (new Date(date - (new Date()).getTimezoneOffset() * 60000)).toISOString().substr(0, 10)\n\n        console.log(this.startEventTime)\n        console.log(this.endEventTime)\n        this.isChangeEventWithDuration = true\n\n      } else {\n\n        this.timePicker = this.makeHoursAndMinutesStr(date)\n        this.datePicker = (new Date(date - (new Date()).getTimezoneOffset() * 60000)).toISOString().substr(0, 10)\n        this.isChangeEvent = true\n        this.$forceUpdate();\n      }\n    },\n    saveEventWithDurationChanges() {\n      let startDate = this.makeDate(this.datePicker, this.startEventTime)\n      // let startDate = new Date(this.datePicker + \"T\" + this.startEventTime)\n      let endDate = this.makeDate(this.datePicker, this.endEventTime)\n      // let endDate = new Date(this.datePicker + \"T\" + this.endEventTime)\n\n      this.$store.state.events[this.selectedEventIndex].timeStart = startDate.getTime() + this.$store.state.events[this.selectedEventIndex].dt % 1000\n      this.$store.state.events[this.selectedEventIndex].timeEnd = endDate.getTime() + this.$store.state.events[this.selectedEventIndex].dt % 1000\n      this.$store.state.events[this.selectedEventIndex].dt = this.$store.state.events[this.selectedEventIndex].timeStart\n\n      this.changeEventFromBD(this.$store.state.events[this.selectedEventIndex])\n      localStorage.setItem('events', JSON.stringify(this.$store.state.events))\n      this.isChangeEventWithDuration = false\n      this.sortEvents()\n    },\n    saveEventChanges() {\n      let date = this.makeDate(this.datePicker, this.timePicker)\n      // let date = new Date(this.datePicker + \"T\" + this.timePicker)\n\n      this.$store.state.events[this.selectedEventIndex].dt = date.getTime() + this.$store.state.events[this.selectedEventIndex].dt % 1000\n\n      this.changeEventFromBD(this.$store.state.events[this.selectedEventIndex])\n      localStorage.setItem('events', JSON.stringify(this.$store.state.events))\n      this.isChangeEvent = false\n      this.sortEvents()\n    },\n    calcTimePercent(index) {\n      if (this.$store.state.events[index].timeEnd === 0) {\n        return 100\n      }\n      if ((this.$store.state.events[index].timeEnd - this.$store.state.events[index].timeStart) <= 0)\n        return 0\n\n      let timeForDay = 0\n      for (let i = 0; i < this.eventsArray.length; i++) {\n        if ((new Date(this.$store.state.events[i].dt)).getDate() === (new Date(this.$store.state.events[index].dt)).getDate()\n            && this.$store.state.events[i].timeStart !== 0) {\n          timeForDay += this.$store.state.events[i].timeEnd - this.$store.state.events[i].timeStart\n        }\n      }\n      return this.percentOfEventTime = (this.$store.state.events[index].timeEnd - this.$store.state.events[index].timeStart) / timeForDay * 100\n    },\n\n    async getEvents() {\n      let response = await fetch('/api/getEvents', {\n        method: 'GET',\n      });\n\n      if (response.ok) { // если HTTP-статус в диапазоне 200-299\n        // получаем тело ответа (см. про этот метод ниже)\n        let events = await response.json()\n        this.$store.state.events = events\n        console.log(this.$store.state.events)\n        this.sortEvents()\n        localStorage.setItem('events', JSON.stringify(this.$store.state.events))\n\n        console.log(\"okkkk\")\n      } else if (response.status > 299 && response.status < 500) {\n        console.log(\"err\")\n      } else if (response.status > 500) {\n        console.log(\"some wrong on backend\")\n      }\n    },\n\n    async changeEventFromBD(event) {\n      let response = await fetch('/api/changeEvent', {\n        method: 'PUT',\n        body: JSON.stringify(event),\n      });\n      if (response.ok) { // если HTTP-статус в диапазоне 200-299\n        // получаем тело ответа (см. про этот метод ниже)\n        console.log(this.$store.state.events)\n        this.sortEvents()\n        localStorage.setItem('events', JSON.stringify(this.$store.state.events))\n\n        console.log(\"okkkk\")\n      } else if (response.status > 299 && response.status < 500) {\n        console.log(\"err\")\n\n      } else if (response.status > 500) {\n        console.log(\"some wrong on backend\")\n      }\n    },\n    async deleteEventFromBD(id) {\n      let response = await fetch('/api/deleteEvent', {\n        method: 'DELETE',\n        body: JSON.stringify({id: id}),\n      });\n      if (response.ok) { // если HTTP-статус в диапазоне 200-299\n        // получаем тело ответа (см. про этот метод ниже)\n        console.log(this.$store.state.events)\n        this.sortEvents()\n        localStorage.setItem('events', JSON.stringify(this.$store.state.events))\n\n        console.log(\"okkkk\")\n      } else if (response.status > 299 && response.status < 500) {\n        console.log(\"err\")\n\n      } else if (response.status > 500) {\n        console.log(\"some wrong on backend\")\n      }\n    },\n\n\n    borderColorForEvent(index) {\n      // console.log(this.$store.state.events[index].timeStart === undefined ? \"blue\" : \"green\")\n      return this.$store.state.events[index].timeStart === 0 ? \"none\" : \"green\"//rgb(47,101,186)-blue\n    },\n    sortEvents() {\n      this.$store.state.events = this.$store.state.events.slice().sort((a, b) =>\n          a.dt < b.dt ? 1 : -1)\n    },\n\n    isNewDay(index) {\n      if (index === 0) {\n        return true\n      }\n      console.log(index, (new Date(this.eventsArray[index - 1].dt)).getDate(), (new Date(this.eventsArray[index].dt)).getDate())\n      return (new Date(this.eventsArray[index - 1].dt)).getDate() !== (new Date(this.eventsArray[index].dt)).getDate();\n    },\n\n    printEventDuration(event) {\n      let hours = Math.floor((event.timeEnd - event.timeStart) / (3600000))\n      let minutes = Math.floor((event.timeEnd - event.timeStart) % (3600000) / 60000)\n      minutes = minutes.toString().length === 1 ? '0' + minutes : minutes\n      return hours + \":\" + minutes\n    },\n\n    getHourAndMinutes(event) {\n      // let hour = moment(event.dt).hour()\n      // let minutes = moment(event.dt).minutes().toString().length === 1 ? \"0\" + moment(event.dt).minutes() : moment(event.dt).minutes()\n      if (event.timeEnd === 0 || event.timeEnd === undefined) {\n        return this.makeHoursAndMinutesStr(new Date(event.dt))\n      } else {\n        return this.makeHoursAndMinutesStr(new Date(event.dt)) + \" - \" + this.makeHoursAndMinutesStr(new Date(event.timeEnd))\n\n      }\n    },\n    getEndOfEventStr(event) {\n      return this.makeHoursAndMinutesStr(new Date(event.timeEnd))\n    },\n    makeHoursAndMinutesStr(date) {\n      let hours = date.getHours()\n      let minutes = date.getMinutes()\n      hours = hours.toString().length === 1 ? '0' + hours : hours\n      minutes = minutes.toString().length === 1 ? '0' + minutes : minutes\n      return hours + ':' + minutes\n    },\n    makeDate(date, time, seconds, milliseconds) {\n      date = date === undefined ? \"\" : date\n      time = time === undefined ? \"\" : \"T\" + time\n      if (seconds !== undefined) {\n        seconds = seconds.length === 1 ? '0' + seconds : seconds\n      }\n      seconds = seconds === undefined ? \"\" : \":\" + seconds\n      milliseconds = milliseconds === undefined ? \"\" : \".\" + milliseconds\n      console.log(\"make Date = \", date + time + seconds + milliseconds)\n\n      return new Date(date + time + seconds + milliseconds)\n    },\n    findIndexEvents(id) {\n      for (let i = 0; i < this.$store.state.events.length; i++) {\n        if (this.$store.state.events[i].id === id) {\n          return i\n        }\n      }\n      return -1\n    },\n\n  },\n  beforeMount() {\n    this.getEvents()\n  },\n}\n</script>\n\n<style scoped>\n\n.picker {\n  color: white;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  left: 0;\n  background-color: rgba(0, 0, 0, 0.5);\n  position: fixed;\n  z-index: 100;\n  overflow: auto;\n  display: flex;\n  padding-top: 80px;\n}\n\n.picker__content {\n  /*overflow-y: scroll;*/\n  display: block;\n  width: 290px;\n  margin: auto;\n  padding: 0;\n\n  min-height: 100%;\n  justify-content: space-between;\n  z-index: 200;\n}\n</style>"]}]}
{"remainingRequest":"/Users/mac/go/src/events/static/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mac/go/src/events/static/src/components/tasks/CreatTask.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mac/go/src/events/static/src/components/tasks/CreatTask.vue","mtime":1660637056327},{"path":"/Users/mac/go/src/events/static/node_modules/cache-loader/dist/cjs.js","mtime":1656160197065},{"path":"/Users/mac/go/src/events/static/node_modules/thread-loader/dist/cjs.js","mtime":1656160197065},{"path":"/Users/mac/go/src/events/static/node_modules/babel-loader/lib/index.js","mtime":1656160197672},{"path":"/Users/mac/go/src/events/static/node_modules/cache-loader/dist/cjs.js","mtime":1656160197065},{"path":"/Users/mac/go/src/events/static/node_modules/vue-loader/lib/index.js","mtime":1656160198005}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJjcmVhdFRhc2siLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpc05ld1Rhc2s6IGZhbHNlLAogICAgICBkYXRlc1Rhc2s6IFsnMjAxOS0wOS0xMCcsICcyMDE5LTA5LTIwJ10sCiAgICAgIHRhc2tUaXRsZTogIiIsCiAgICAgIGl0ZW1zOiBbJ3RpbWUnLCAnbXkgdHlwZSddLAogICAgICB0eXBlT2ZUYXNrU2VsZWN0OiAidGltZSIsCiAgICAgIHRhc2tIb3VyczogIiIsCiAgICAgIHRhc2tNaW51dGVzOiAiIiwKICAgICAgdGFza0NvdW50OiAiIiwKICAgICAgdGFza015VHlwZTogIiIsCgogICAgICBjb2RlUnVsZXM6IFsKICAgICAgICB2ID0+ICEhdiB8fCAnY29kZSBpcyByZXF1aXJlZCcsCiAgICAgICAgdiA9PiAodiAmJiB2Lmxlbmd0aCA8PSAyMCkgfHwgJ2NvZGUgbXVzdCBiZSA0IGNoYXJhY3RlcnMnLAogICAgICBdLAogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGRhdGVSYW5nZVRleHQoKSB7CiAgICAgIHJldHVybiB0aGlzLmRhdGVzVGFzay5qb2luKCcgfiAnKQogICAgfSwKICB9LAogIG1ldGhvZHM6IHsKICAgIGNyZWF0VGFzaygpIHsKICAgICAgbGV0IG51bSA9IDA7CiAgICAgIGxldCB0eXBlID0gIiI7CiAgICAgIGlmICh0aGlzLnR5cGVPZlRhc2tTZWxlY3QgPT09ICJ0aW1lIikgewogICAgICAgIGlmIChpc05hTihwYXJzZUludCh0aGlzLnRhc2tIb3VycykpKSB7CiAgICAgICAgICBhbGVydCgiaG91cnMgc2hvdWxkIGJlIGludGVnZXIiKQogICAgICAgICAgcmV0dXJuCiAgICAgICAgfQogICAgICAgIGlmIChpc05hTihwYXJzZUludCh0aGlzLnRhc2tNaW51dGVzKSkpIHsKICAgICAgICAgIGFsZXJ0KCJtaW51dGVzIHNob3VsZCBiZSBpbnRlZ2VyIikKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgbnVtID0gKHBhcnNlSW50KHRoaXMudGFza0hvdXJzKSAqIDYwICsgcGFyc2VJbnQodGhpcy50YXNrTWludXRlcykpICogNjAKICAgICAgICB0eXBlID0gInRpbWUiCiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKGlzTmFOKHBhcnNlSW50KHRoaXMudGFza0NvdW50KSkpIHsKICAgICAgICAgIGFsZXJ0KCJjb3VudCBzaG91bGQgYmUgaW50ZWdlciIpCiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIG51bSA9IHBhcnNlSW50KHRoaXMudGFza0NvdW50KQogICAgICAgIHR5cGUgPSB0aGlzLnRhc2tNeVR5cGUKICAgICAgfQoKICAgICAgaWYgKHRoaXMubWFrZURhdGUodGhpcy5kYXRlc1Rhc2tbMF0pLmdldFRpbWUoKSAvIDEwMDAgPiB0aGlzLm1ha2VEYXRlKHRoaXMuZGF0ZXNUYXNrWzFdKS5nZXRUaW1lKCkgLyAxMDAwKSB7CiAgICAgICAgbGV0IHRtcCA9IHRoaXMuZGF0ZXNUYXNrWzBdCiAgICAgICAgdGhpcy5kYXRlc1Rhc2tbMF0gPSB0aGlzLmRhdGVzVGFza1sxXQogICAgICAgIHRoaXMuZGF0ZXNUYXNrWzFdID0gdG1wCiAgICAgIH0KCgogICAgICBsZXQgbmV3VGFzayA9IHsKICAgICAgICB0aW1lU3RhcnQ6IHRoaXMubWFrZURhdGUodGhpcy5kYXRlc1Rhc2tbMF0sIHRoaXMubWFrZUhvdXJzQW5kTWludXRlc1N0cihuZXcgRGF0ZSgpKSkuZ2V0VGltZSgpIC8gMTAwMCwvL3NlY29uZHMKICAgICAgICB0aW1lRW5kOiB0aGlzLm1ha2VEYXRlKHRoaXMuZGF0ZXNUYXNrWzFdLCB0aGlzLm1ha2VIb3Vyc0FuZE1pbnV0ZXNTdHIobmV3IERhdGUoKSkpLmdldFRpbWUoKSAvIDEwMDAsLy9zZWNvbmRzCiAgICAgICAgdGl0bGU6IHRoaXMudGFza1RpdGxlLAogICAgICAgIHRhcmdldDogbnVtLC8vaWYgdHlwZT09dGltZSAtIHNlY29uZHMKICAgICAgICBudW06IDAsCiAgICAgICAgdHlwZTogdHlwZSwKICAgICAgfQogICAgICB0aGlzLiRzdG9yZS5zdGF0ZS50YXNrcy5wdXNoKG5ld1Rhc2spCiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0YXNrcycsIEpTT04uc3RyaW5naWZ5KHRoaXMuJHN0b3JlLnN0YXRlLnRhc2tzKSkKICAgICAgdGhpcy4kc3RvcmUuc3RhdGUubWFrZVJlcSgnL2FwaS9uZXdUYXNrJywnUE9TVCcsSlNPTi5zdHJpbmdpZnkobmV3VGFzaykpCiAgICAgIGNvbnNvbGUubG9nKG5ld1Rhc2spCiAgICAgIHRoaXMuJGVtaXQoImlzTmV3VGFza0NoYW5nZSIsIGZhbHNlKQogICAgfSwKICAgIG1ha2VIb3Vyc0FuZE1pbnV0ZXNTdHIoZGF0ZSkgewogICAgICBsZXQgaG91cnMgPSBkYXRlLmdldEhvdXJzKCkKICAgICAgbGV0IG1pbnV0ZXMgPSBkYXRlLmdldE1pbnV0ZXMoKQogICAgICBob3VycyA9IGhvdXJzLnRvU3RyaW5nKCkubGVuZ3RoID09PSAxID8gJzAnICsgaG91cnMgOiBob3VycwogICAgICBtaW51dGVzID0gbWludXRlcy50b1N0cmluZygpLmxlbmd0aCA9PT0gMSA/ICcwJyArIG1pbnV0ZXMgOiBtaW51dGVzCiAgICAgIHJldHVybiBob3VycyArICc6JyArIG1pbnV0ZXMKICAgIH0sCiAgICBtYWtlRGF0ZShkYXRlLCB0aW1lLCBzZWNvbmRzLCBtaWxsaXNlY29uZHMpIHsKICAgICAgZGF0ZSA9IGRhdGUgPT09IHVuZGVmaW5lZCA/ICIiIDogZGF0ZQogICAgICB0aW1lID0gdGltZSA9PT0gdW5kZWZpbmVkID8gIiIgOiAiVCIgKyB0aW1lCiAgICAgIGlmIChzZWNvbmRzICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBzZWNvbmRzID0gc2Vjb25kcy50b1N0cmluZygpLmxlbmd0aCA9PT0gMSA/ICcwJyArIHNlY29uZHMgOiBzZWNvbmRzCiAgICAgIH0KICAgICAgc2Vjb25kcyA9IHNlY29uZHMgPT09IHVuZGVmaW5lZCA/ICIiIDogIjoiICsgc2Vjb25kcwogICAgICBtaWxsaXNlY29uZHMgPSBtaWxsaXNlY29uZHMgPT09IHVuZGVmaW5lZCA/ICIiIDogIi4iICsgbWlsbGlzZWNvbmRzCiAgICAgIGNvbnNvbGUubG9nKCJtYWtlIERhdGUgPSAiLCBkYXRlICsgdGltZSArIHNlY29uZHMgKyBtaWxsaXNlY29uZHMpCgogICAgICByZXR1cm4gbmV3IERhdGUoZGF0ZSArIHRpbWUgKyBzZWNvbmRzICsgbWlsbGlzZWNvbmRzKQogICAgfSwKICAgIGdldEN1cnJlbnRXZWVrKCkgewogICAgICAvLyBjb25zb2xlLmxvZyhwYXJzZUludChuZXcgRGF0ZSgpLmdldCgpKSkKCiAgICAgIGxldCBkYXkgPSAobmV3IERhdGUoKSkuZ2V0RGF5KCkgLSAxCiAgICAgIGlmIChkYXkgPT09IC0xKSB7CiAgICAgICAgZGF5ID0gNgogICAgICB9CgogICAgICBsZXQgc3RhcnREYXRlID0gbmV3IERhdGUoKG5ldyBEYXRlKCkpLmdldFRpbWUoKSAtIGRheSAqIDEwMDAgKiA2MCAqIDYwICogMjQpCiAgICAgIGxldCBlbmREYXRlID0gbmV3IERhdGUoc3RhcnREYXRlLmdldFRpbWUoKSArIDEwMDAgKiA2MCAqIDYwICogMjQgKiA2KQoKICAgICAgbGV0IHN0YXJ0TW9udGggPSBzdGFydERhdGUuZ2V0VVRDTW9udGgoKSArIDEKICAgICAgbGV0IGVuZE1PbnRoID0gZW5kRGF0ZS5nZXRVVENNb250aCgpICsgMQoKICAgICAgc3RhcnRNb250aC50b1N0cmluZygpLmxlbmd0aCA9PT0gMSA/IHN0YXJ0TW9udGggPSAiMCIgKyBzdGFydE1vbnRoIDogc3RhcnRNb250aCA9ICIiICsgc3RhcnRNb250aAogICAgICBlbmRNT250aC50b1N0cmluZygpLmxlbmd0aCA9PT0gMSA/IGVuZE1PbnRoID0gIjAiICsgZW5kTU9udGggOiBzdGFydE1vbnRoID0gIiIgKyBlbmRNT250aAoKICAgICAgbGV0IHN0YXJ0RGF5ID0gc3RhcnREYXRlLmdldFVUQ0RhdGUoKQogICAgICBsZXQgZW5kRGF5ID0gZW5kRGF0ZS5nZXRVVENEYXRlKCkKCiAgICAgIHN0YXJ0RGF5LnRvU3RyaW5nKCkubGVuZ3RoID09PSAxID8gc3RhcnREYXkgPSAiMCIgKyBzdGFydERheSA6IHN0YXJ0RGF5ID0gIiIgKyBzdGFydERheQogICAgICBlbmREYXkudG9TdHJpbmcoKS5sZW5ndGggPT09IDEgPyBlbmREYXkgPSAiMCIgKyBlbmREYXkgOiBlbmREYXkgPSAiIiArIGVuZERheQoKICAgICAgbGV0IHN0YXJ0RGF0ZVN0ciA9IHN0YXJ0RGF0ZS5nZXRGdWxsWWVhcigpICsgIi0iICsgc3RhcnRNb250aCArICItIiArIHN0YXJ0RGF5CiAgICAgIGxldCBlbmREYXRlU3RyID0gZW5kRGF0ZS5nZXRGdWxsWWVhcigpICsgIi0iICsgZW5kTU9udGggKyAiLSIgKyBlbmREYXkKICAgICAgY29uc29sZS5sb2coc3RhcnREYXRlU3RyKQogICAgICBjb25zb2xlLmxvZyhlbmREYXRlU3RyKQoKICAgICAgY29uc29sZS5sb2cobmV3IERhdGUoc3RhcnREYXRlU3RyKSkKICAgICAgY29uc29sZS5sb2cobmV3IERhdGUoZW5kRGF0ZVN0cikpCiAgICAgIHRoaXMuZGF0ZXNUYXNrID0gW3N0YXJ0RGF0ZVN0ciwgZW5kRGF0ZVN0cl0KICAgIH0sCiAgfSwKCiAgYmVmb3JlTW91bnQoKSB7CiAgICB0aGlzLmdldEN1cnJlbnRXZWVrKCkKICB9LAp9Cg=="},{"version":3,"sources":["CreatTask.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"CreatTask.vue","sourceRoot":"src/components/tasks","sourcesContent":["<template>\n  <div>\n    <h1>Creat your task:</h1>\n    <template>\n      <v-row>\n        <v-col\n            cols=\"12\"\n            sm=\"6\"\n        >\n          <v-date-picker\n              v-model=\"datesTask\"\n              range\n              color=\"black lighten-1\"\n          ></v-date-picker>\n        </v-col>\n        <v-col\n            cols=\"12\"\n            sm=\"6\"\n        >\n          <v-text-field\n              v-model=\"dateRangeText\"\n              label=\"Date range\"\n              style=\"background-color: white;padding: 20px 20px 0 20px;border-radius: 3px\"\n              prepend-icon=\"mdi-calendar\"\n              readonly\n          ></v-text-field>\n        </v-col>\n      </v-row>\n    </template>\n    <v-text-field\n        style=\"margin-top: 20px\"\n        label=\"ðŸ˜³ to do ...\"\n        solo\n        v-model=\"taskTitle\"\n    ></v-text-field>\n    <v-container grid-list-md text-xs-center>\n      <v-layout row wrap>\n        <v-row>\n          <template v-if=\"typeOfTaskSelect==='time'\">\n            <v-flex xs4 style=\"margin-top: -10px\">\n              <v-text-field\n                  label=\"hours\"\n                  solo\n                  :rules=\"codeRules\"\n                  v-model=\"taskHours\"\n              ></v-text-field>\n            </v-flex>\n            <v-flex xs4 style=\"margin-top: -10px\">\n              <v-text-field\n                  label=\"minutes\"\n                  solo\n                  v-model=\"taskMinutes\"\n              ></v-text-field>\n            </v-flex>\n          </template>\n          <template style=\"margin-top: -10px\" v-if=\"typeOfTaskSelect==='my type'\">\n            <v-flex xs4 style=\"margin-top: -10px\">\n              <v-text-field\n                  label=\"count\"\n                  solo\n                  :rules=\"codeRules\"\n                  v-model=\"taskCount\"\n              ></v-text-field>\n            </v-flex>\n            <v-flex xs4 style=\"margin-top: -10px\">\n              <v-text-field\n                  label=\"type\"\n                  solo\n                  :rules=\"codeRules\"\n                  v-model=\"taskMyType\"\n              ></v-text-field>\n            </v-flex>\n          </template>\n          <v-flex xs4>\n            <v-select\n                style=\"margin-top: -10px\"\n                v-model=\"typeOfTaskSelect\"\n                :items=\"items\"\n                label=\"time\"\n                solo\n            ></v-select>\n          </v-flex>\n        </v-row>\n      </v-layout>\n    </v-container>\n    <v-btn @click=\"creatTask\" color=\"white\" style=\"margin: -10px 0 50px;width: 100%;height: 40px\">creat</v-btn>\n\n  </div>\n</template>\n\n<script>\n\n\nexport default {\n  name: \"creatTask\",\n  data() {\n    return {\n      isNewTask: false,\n      datesTask: ['2019-09-10', '2019-09-20'],\n      taskTitle: \"\",\n      items: ['time', 'my type'],\n      typeOfTaskSelect: \"time\",\n      taskHours: \"\",\n      taskMinutes: \"\",\n      taskCount: \"\",\n      taskMyType: \"\",\n\n      codeRules: [\n        v => !!v || 'code is required',\n        v => (v && v.length <= 20) || 'code must be 4 characters',\n      ],\n    }\n  },\n  computed: {\n    dateRangeText() {\n      return this.datesTask.join(' ~ ')\n    },\n  },\n  methods: {\n    creatTask() {\n      let num = 0;\n      let type = \"\";\n      if (this.typeOfTaskSelect === \"time\") {\n        if (isNaN(parseInt(this.taskHours))) {\n          alert(\"hours should be integer\")\n          return\n        }\n        if (isNaN(parseInt(this.taskMinutes))) {\n          alert(\"minutes should be integer\")\n          return;\n        }\n        num = (parseInt(this.taskHours) * 60 + parseInt(this.taskMinutes)) * 60\n        type = \"time\"\n      } else {\n        if (isNaN(parseInt(this.taskCount))) {\n          alert(\"count should be integer\")\n          return;\n        }\n        num = parseInt(this.taskCount)\n        type = this.taskMyType\n      }\n\n      if (this.makeDate(this.datesTask[0]).getTime() / 1000 > this.makeDate(this.datesTask[1]).getTime() / 1000) {\n        let tmp = this.datesTask[0]\n        this.datesTask[0] = this.datesTask[1]\n        this.datesTask[1] = tmp\n      }\n\n\n      let newTask = {\n        timeStart: this.makeDate(this.datesTask[0], this.makeHoursAndMinutesStr(new Date())).getTime() / 1000,//seconds\n        timeEnd: this.makeDate(this.datesTask[1], this.makeHoursAndMinutesStr(new Date())).getTime() / 1000,//seconds\n        title: this.taskTitle,\n        target: num,//if type==time - seconds\n        num: 0,\n        type: type,\n      }\n      this.$store.state.tasks.push(newTask)\n      localStorage.setItem('tasks', JSON.stringify(this.$store.state.tasks))\n      this.$store.state.makeReq('/api/newTask','POST',JSON.stringify(newTask))\n      console.log(newTask)\n      this.$emit(\"isNewTaskChange\", false)\n    },\n    makeHoursAndMinutesStr(date) {\n      let hours = date.getHours()\n      let minutes = date.getMinutes()\n      hours = hours.toString().length === 1 ? '0' + hours : hours\n      minutes = minutes.toString().length === 1 ? '0' + minutes : minutes\n      return hours + ':' + minutes\n    },\n    makeDate(date, time, seconds, milliseconds) {\n      date = date === undefined ? \"\" : date\n      time = time === undefined ? \"\" : \"T\" + time\n      if (seconds !== undefined) {\n        seconds = seconds.toString().length === 1 ? '0' + seconds : seconds\n      }\n      seconds = seconds === undefined ? \"\" : \":\" + seconds\n      milliseconds = milliseconds === undefined ? \"\" : \".\" + milliseconds\n      console.log(\"make Date = \", date + time + seconds + milliseconds)\n\n      return new Date(date + time + seconds + milliseconds)\n    },\n    getCurrentWeek() {\n      // console.log(parseInt(new Date().get()))\n\n      let day = (new Date()).getDay() - 1\n      if (day === -1) {\n        day = 6\n      }\n\n      let startDate = new Date((new Date()).getTime() - day * 1000 * 60 * 60 * 24)\n      let endDate = new Date(startDate.getTime() + 1000 * 60 * 60 * 24 * 6)\n\n      let startMonth = startDate.getUTCMonth() + 1\n      let endMOnth = endDate.getUTCMonth() + 1\n\n      startMonth.toString().length === 1 ? startMonth = \"0\" + startMonth : startMonth = \"\" + startMonth\n      endMOnth.toString().length === 1 ? endMOnth = \"0\" + endMOnth : startMonth = \"\" + endMOnth\n\n      let startDay = startDate.getUTCDate()\n      let endDay = endDate.getUTCDate()\n\n      startDay.toString().length === 1 ? startDay = \"0\" + startDay : startDay = \"\" + startDay\n      endDay.toString().length === 1 ? endDay = \"0\" + endDay : endDay = \"\" + endDay\n\n      let startDateStr = startDate.getFullYear() + \"-\" + startMonth + \"-\" + startDay\n      let endDateStr = endDate.getFullYear() + \"-\" + endMOnth + \"-\" + endDay\n      console.log(startDateStr)\n      console.log(endDateStr)\n\n      console.log(new Date(startDateStr))\n      console.log(new Date(endDateStr))\n      this.datesTask = [startDateStr, endDateStr]\n    },\n  },\n\n  beforeMount() {\n    this.getCurrentWeek()\n  },\n}\n</script>\n\n<style scoped>\n\n</style>\n\n"]}]}
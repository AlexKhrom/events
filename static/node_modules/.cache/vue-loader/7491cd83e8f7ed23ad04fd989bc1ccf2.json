{"remainingRequest":"/Users/mac/go/src/events/static/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mac/go/src/events/static/src/components/tasks/ListTasks.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mac/go/src/events/static/src/components/tasks/ListTasks.vue","mtime":1660935460445},{"path":"/Users/mac/go/src/events/static/node_modules/babel-loader/lib/index.js","mtime":1656160197672},{"path":"/Users/mac/go/src/events/static/node_modules/cache-loader/dist/cjs.js","mtime":1656160197065},{"path":"/Users/mac/go/src/events/static/node_modules/vue-loader/lib/index.js","mtime":1656160198005}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBGb290ZXIgZnJvbSAiQC9jb21wb25lbnRzL0Zvb3RlciI7CmltcG9ydCBtb21lbnQgZnJvbSAibW9tZW50IjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTGlzdFRhc2tzIiwKICBjb21wb25lbnRzOiB7Rm9vdGVyfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdGFza0hvdXJzOiAwLAogICAgICB0YXNrTWludXRlczogMCwKICAgICAgdGFza051bTogMCwKICAgICAgaXNBZGROdW06IGZhbHNlLAogICAgICBpc1Rhc2tJbmZvOiBmYWxzZSwKICAgICAgY2hvc2VuVGFza0lkOiAtMSwKICAgICAgdGFza1BpZWNlczogW10sCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBnZXRUYXNrcygpIHsKICAgICAgY29uc29sZS5sb2coJ2hpIHRoZXJlIHRvbycpCiAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IHRoaXMuJHN0b3JlLnN0YXRlLm1ha2VSZXEoJ2FwaS9nZXRUYXNrcycsICdHRVQnKQoKICAgICAgbGV0IHRhc2tzID0gYXdhaXQgcmVzcG9uc2UuanNvbigpCiAgICAgIGNvbnNvbGUubG9nKCd0YXNscyA9ICcsIHRhc2tzKQogICAgICBpZiAodGFza3MgPT09IG51bGwpIHsKICAgICAgICB0YXNrcyA9IFtdCiAgICAgIH0KCiAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLnRhc2tzID0gdGFza3MKICAgICAgY29uc29sZS5sb2coJ3Jlc3AgPSAnLCB0aGlzLiRzdG9yZS5zdGF0ZS50YXNrcykKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rhc2tzJywgSlNPTi5zdHJpbmdpZnkodGhpcy4kc3RvcmUuc3RhdGUudGFza3MpKQogICAgICBjb25zb2xlLmxvZyh0aGlzLiRzdG9yZS5zdGF0ZS50YXNrcykKICAgIH0sCgogICAgb3BlbkNoYW5nZVRhc2sodGFza0lkKSB7CiAgICAgIHRoaXMuaXNBZGROdW0gPSB0cnVlCiAgICAgIHRoaXMuY2hvc2VuVGFza0lkID0gdGFza0lkCiAgICAgIHRoaXMuZ2V0VGFza1BpZWNlcygpCiAgICAgIGNvbnNvbGUubG9nKCdoaScpCiAgICB9LAogICAgYXN5bmMgZ2V0VGFza1BpZWNlcygpewogICAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLiRzdG9yZS5zdGF0ZS5tYWtlUmVxKCJhcGkvZ2V0VGFza1BpZWNlcyIsICJQT1NUIiwgSlNPTi5zdHJpbmdpZnkoe2lkOnRoaXMuY2hvc2VuVGFza0lkfSkpCiAgICAgIGxldCB0YXNrc1BpZWNlcyA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKQogICAgICBjb25zb2xlLmxvZygndGFzbHMgPSAnLCB0YXNrc1BpZWNlcykKICAgICAgaWYgKHRhc2tzUGllY2VzID09PSBudWxsKSB7CiAgICAgICAgdGFza3NQaWVjZXMgPSBbXQogICAgICB9CgogICAgICB0aGlzLnRhc2tQaWVjZXMgPSB0YXNrc1BpZWNlcwogICAgICBjb25zb2xlLmxvZygicGllY2VzID0gIiwgdGFza3NQaWVjZXMpCgogICAgfSwKICAgIGFzeW5jIGNoYW5nZVRhc2soKSB7CiAgICAgIGxldCBpbmRleCA9IHRoaXMuZmluZEluZGV4VGFza3ModGhpcy5jaG9zZW5UYXNrSWQpCiAgICAgIGxldCB0YXNrID0gdGhpcy4kc3RvcmUuc3RhdGUudGFza3NbaW5kZXhdCiAgICAgIGxldCBudW0gPSAwCiAgICAgIGxldCBkZWx0YU51bSA9IDAKICAgICAgY29uc29sZS5sb2coe3Rhc2t9KQogICAgICBpZiAocGFyc2VJbnQodGhpcy50YXNrTnVtKSA+IDAgfHwgcGFyc2VJbnQodGhpcy50YXNrSG91cnMpID49IDAgJiYgcGFyc2VJbnQodGhpcy50YXNrTWludXRlcykgPj0gMCkgewogICAgICAgIGlmICh0YXNrLnR5cGUgPT09ICd0aW1lJykgewogICAgICAgICAgY29uc29sZS5sb2coImhpIHRoZXJlIikKICAgICAgICAgIGNvbnNvbGUubG9nKCdjYWxjID0gJywgcGFyc2VJbnQodGhpcy4kc3RvcmUuc3RhdGUudGFza3NbaW5kZXhdLm51bSkgKyBwYXJzZUludCgocGFyc2VJbnQodGhpcy50YXNrSG91cnMpICogNjAgKyBwYXJzZUludCh0aGlzLnRhc2tNaW51dGVzKSkgKiA2MCkpCiAgICAgICAgICBudW0gPSBwYXJzZUludCh0aGlzLiRzdG9yZS5zdGF0ZS50YXNrc1tpbmRleF0ubnVtKSArIHBhcnNlSW50KChwYXJzZUludCh0aGlzLnRhc2tIb3VycykgKiA2MCArIHBhcnNlSW50KHRoaXMudGFza01pbnV0ZXMpKSAqIDYwKQogICAgICAgICAgZGVsdGFOdW0gPSBwYXJzZUludCgocGFyc2VJbnQodGhpcy50YXNrSG91cnMpICogNjAgKyBwYXJzZUludCh0aGlzLnRhc2tNaW51dGVzKSkgKiA2MCkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgbnVtID0gcGFyc2VJbnQodGhpcy4kc3RvcmUuc3RhdGUudGFza3NbaW5kZXhdLm51bSkgKyBwYXJzZUludCh0aGlzLnRhc2tOdW0pCiAgICAgICAgICBkZWx0YU51bSA9IHBhcnNlSW50KHRoaXMudGFza051bSkKICAgICAgICB9CiAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUudGFza3NbaW5kZXhdLm51bSA9IG51bQogICAgICB9CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0YXNrcycsIEpTT04uc3RyaW5naWZ5KHRoaXMuJHN0b3JlLnN0YXRlLnRhc2tzKSkKICAgICAgY29uc29sZS5sb2codGFzaykKICAgICAgbGV0IG5ld1Rhc2sgPSB7CiAgICAgICAgaWQ6IHRhc2suaWQsCiAgICAgICAgdGl0bGU6IHRhc2sudGl0bGUsCiAgICAgICAgdGltZVN0YXJ0OiB0YXNrLnRpbWVTdGFydCwKICAgICAgICB0aW1lRW5kOiB0YXNrLnRpbWVFbmQsCiAgICAgICAgdHlwZTogdGFzay50eXBlLAogICAgICAgIHRhcmdldDogdGFzay50YXJnZXQsCiAgICAgICAgbnVtOiBudW0sCiAgICAgICAgZGVsdGFOdW06IGRlbHRhTnVtLAogICAgICB9CiAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IHRoaXMuJHN0b3JlLnN0YXRlLm1ha2VSZXEoJ2FwaS9jaGFuZ2VUYXNrJywgJ1BVVCcsIEpTT04uc3RyaW5naWZ5KG5ld1Rhc2spKQogICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSkKICAgICAgdGhpcy5pc0FkZE51bSA9IGZhbHNlCiAgICAgIHRoaXMudGFza0hvdXJzID0gMAogICAgICB0aGlzLnRhc2tNaW51dGVzID0gMAogICAgICB0aGlzLnRhc2tOdW0gPSAwCiAgICB9LAogICAgZGVsZXRlVGFzayhpZCkgewogICAgICBsZXQgaW5kZXggPSB0aGlzLmZpbmRJbmRleFRhc2tzKGlkKQogICAgICBsZXQgdGFzayA9IHRoaXMuJHN0b3JlLnN0YXRlLnRhc2tzW2luZGV4XQoKICAgICAgLy8gY29uc29sZS5sb2coImluZGV4ID0gIiwgaW5kZXgpCiAgICAgIC8vIGNvbnNvbGUubG9nKHtldmVudH0pCgogICAgICBsZXQgd2FpdFNlY29uZHMgPSAzCiAgICAgIHRhc2sud2FpdFNlY29uZHMgPSB3YWl0U2Vjb25kcwogICAgICBsZXQgaW50ZXJ2YWxJZCA9IHNldEludGVydmFsKCgpID0+IHsKICAgICAgICBpZiAoIXRhc2suZGVsZXRlZCkgewogICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbElkKQogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rhc2tzJywgSlNPTi5zdHJpbmdpZnkodGhpcy4kc3RvcmUuc3RhdGUudGFza3MpKQogICAgICAgICAgdGhpcy4kZm9yY2VVcGRhdGUoKQogICAgICAgICAgcmV0dXJuCiAgICAgICAgfQogICAgICAgIGlmICgtLXdhaXRTZWNvbmRzIDwgMCkgewogICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbElkKTsKICAgICAgICAgIGxldCBpbmRleCA9IHRoaXMuZmluZEluZGV4VGFza3MoaWQpCiAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5tYWtlUmVxKCJhcGkvZGVsZXRlVGFzayIsICJERUxFVEUiLCBKU09OLnN0cmluZ2lmeSh7aWQ6IGlkfSkpCiAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS50YXNrcy5zcGxpY2UoaW5kZXgsIDEpCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRhc2sud2FpdFNlY29uZHMgPSB3YWl0U2Vjb25kcwogICAgICAgIH0KICAgICAgICB0aGlzLiRmb3JjZVVwZGF0ZSgpCiAgICAgIH0sIDEwMDApOwoKICAgICAgLy8gdGhpcy4kc3RvcmUuc3RhdGUuZXZlbnRzLnNwbGljZShpbmRleCwgMSkKCiAgICAgIHRhc2suZGVsZXRlZCA9IERhdGUubm93KCk7CiAgICAgIHRoaXMuJGZvcmNlVXBkYXRlKCk7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdldmVudHMnLCBKU09OLnN0cmluZ2lmeSh0aGlzLiRzdG9yZS5zdGF0ZS5ldmVudHMpKQogICAgfSwKICAgIGNhbWViYWNrVGFzayhpZCkgewogICAgICBsZXQgaW5kZXggPSB0aGlzLmZpbmRJbmRleFRhc2tzKGlkKQogICAgICB0aGlzLiRzdG9yZS5zdGF0ZS50YXNrc1tpbmRleF0uZGVsZXRlZCA9IDAKICAgICAgdGhpcy4kZm9yY2VVcGRhdGUoKTsKICAgIH0sCiAgICB0aW1lTGVmdChkYXRlKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKGRhdGUpCiAgICAgIC8vIGxldCBhcnIgPSBtb21lbnQoZGF0ZSkuZnJvbU5vdygpLnNwbGl0KCcgJykKICAgICAgLy8gY29uc29sZS5sb2coYXJyKQogICAgICAvLyBhcnIuc3BsaWNlKDAsMSkKICAgICAgLy8gY29uc29sZS5sb2coYXJyKQogICAgICAvLyByZXR1cm4gItC+0YHRgtCw0LvQvtGB0YwgIithcnIuam9pbigiICIpCiAgICAgIHJldHVybiBtb21lbnQoZGF0ZSkuZnJvbU5vdygpCiAgICB9LAogICAgY2FsY1Byb2dyZXNzKHRhc2tJZCkgewogICAgICBsZXQgdGFzayA9IHRoaXMuJHN0b3JlLnN0YXRlLnRhc2tzW3RoaXMuZmluZEluZGV4VGFza3ModGFza0lkKV0KICAgICAgaWYgKHRhc2sudHlwZSA9PT0gJ3RpbWUnKSB7CiAgICAgICAgcmV0dXJuIHRoaXMubWFrZU1pbnV0ZXNBbmRIb3Vyc1N0cihwYXJzZUludChwYXJzZUludCh0YXNrLm51bSkgLyAzNjAwKSwgcGFyc2VJbnQodGFzay5udW0pICUgMzYwMCAvIDYwKSArICIgLyAiICsgdGhpcy5tYWtlTWludXRlc0FuZEhvdXJzU3RyKHBhcnNlSW50KHBhcnNlSW50KHRhc2sudGFyZ2V0KSAvIDM2MDApLCBwYXJzZUludCh0YXNrLnRhcmdldCkgJSAzNjAwIC8gNjApCiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHRhc2subnVtICsgJyAvICcgKyB0YXNrLnRhcmdldAogICAgICB9CiAgICB9LAogICAgY2FsY1BlcmNlbnQodGFzaykgewogICAgICBsZXQgbnVtID0gMAogICAgICBpZiAodGFzay5udW0gIT09IHVuZGVmaW5lZCkgewogICAgICAgIG51bSA9IHRhc2subnVtCiAgICAgIH0KICAgICAgLy8gY29uc29sZS5sb2coJ3BlcmNlbnRlZ2UgPSAnLCBudW0vdGFzay50YXJnZXQqMTAwKQogICAgICByZXR1cm4gbnVtIC8gdGFzay50YXJnZXQgKiAxMDAgPiAxMDAgPyAxMDAgOiBudW0gLyB0YXNrLnRhcmdldCAqIDEwMAogICAgfSwKICAgIG1ha2VNaW51dGVzQW5kSG91cnNTdHIoaG91cnMsIG1pbnV0ZXMpIHsKICAgICAgaG91cnMgPSBob3Vycy50b1N0cmluZygpLmxlbmd0aCA9PT0gMSA/ICcwJyArIGhvdXJzIDogaG91cnMKICAgICAgbWludXRlcyA9IG1pbnV0ZXMudG9TdHJpbmcoKS5sZW5ndGggPT09IDEgPyAnMCcgKyBtaW51dGVzIDogbWludXRlcwogICAgICByZXR1cm4gaG91cnMgKyAnOicgKyBtaW51dGVzCiAgICB9LAogICAgZmluZEluZGV4VGFza3MoaWQpIHsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLiRzdG9yZS5zdGF0ZS50YXNrcy5sZW5ndGg7IGkrKykgewogICAgICAgIGlmICh0aGlzLiRzdG9yZS5zdGF0ZS50YXNrc1tpXS5pZCA9PT0gaWQpIHsKICAgICAgICAgIHJldHVybiBpCiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiAtMQogICAgfSwKICB9LAogIGJlZm9yZU1vdW50KCkgewogICAgY29uc29sZS5sb2coJ2hpIHRoZXJlJykKICAgIHRoaXMuZ2V0VGFza3MoKQogIH0KfQo="},{"version":3,"sources":["ListTasks.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqHA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ListTasks.vue","sourceRoot":"src/components/tasks","sourcesContent":["<template>\n  <div>\n    <div v-for=\"(task) in this.$store.state.tasks\"\n         :key=\"task.id\"\n    >\n      <div @click=\"isTaskInfo=true\"\n           style=\"display: flex;justify-content: space-between;margin-top: 20px;padding:5px;\">\n        <div>\n          <div :style=\"task.deleted?'opacity: 0.5':''\"\n               style=\"font-size: 18px;text-transform: capitalize;display: flex;align-items: center;\">{{ task.title }}\n          </div>\n          <span :style=\"task.deleted?'opacity: 0.5':''\"\n                style=\"color: #555;font-size: 15px;display: block;padding-top: 10px\">{{\n              timeLeft(new Date(task.timeEnd * 1000))\n            }}\n          </span>\n\n        </div>\n        <div @click.stop>\n          <span v-if=\"task.deleted\" style=\"color: #555;font-size: 12px;padding-right: 10px\">{{\n              task.waitSeconds\n            }}—Å</span>\n          <!--          <v-btn v-if=\"!event.deleted\" @click=\"changeEvent(event.id)\" icon>‚úèÔ∏è</v-btn>-->\n          <v-btn v-if=\"!task.deleted\" @click=\"openChangeTask(task.id)\" icon>‚úèÔ∏è</v-btn>\n          <v-btn v-if=\"task.deleted\" @click=\"camebackTask(task.id)\" text small>–≤–µ—Ä–Ω—É—Ç—å ‚Ü©Ô∏é</v-btn>\n          <v-btn v-else @click=\"deleteTask(task.id)\" icon>üóë</v-btn>\n          <span v-if=\"!task.deleted\"\n                style=\"color: #555;font-size: 13px;display: block;text-align: right;padding-right: 5px\">\n              {{ calcProgress(task.id) }}\n\n          </span>\n        </div>\n      </div>\n      <div :style=\"{border: '2px solid green',opacity:'0.3'}\"\n      ></div>\n      <div\n          :style=\"{position:'relative',top:'-4px',border: '2px solid green',width:''+calcPercent(task)+'%',display:calcPercent(task)===0?'none':''}\"\n      ></div>\n    </div>\n\n    <template v-if=\"isAddNum\">\n      <div class=\"picker\" @click=\"isAddNum=false\">\n        <div class=\"picker__content\" @click.stop>\n          <slot>\n            <div style=\"background-color: white;padding: 20px;border-radius: 3px; width: 320px\">\n              <v-container grid-list-md text-xs-center>\n                <v-layout row wrap>\n                  <v-row>\n                    <div style=\"display: flex;justify-content: space-between;padding:5px;color: #777777;width: 100%\">\n                      <div>\n                        <div class=\"text-h5\" style=\"max-width: 200px;word-wrap: break-word;\">\n                          {{ $store.state.tasks[findIndexTasks(chosenTaskId)].title }}\n                        </div>\n\n                      </div>\n                      <div style=\"white-space: nowrap;\">\n                        {{ calcProgress(chosenTaskId) }}\n                      </div>\n                    </div>\n                    <template v-if=\"$store.state.tasks[findIndexTasks(chosenTaskId)].type==='time'\">\n                      <v-flex xs6>\n                        <v-text-field\n                            label=\"hours\"\n                            outlined\n                            v-model=\"taskHours\"\n                        ></v-text-field>\n                      </v-flex>\n                      <v-flex xs6>\n                        <v-text-field\n                            label=\"minutes\"\n                            outlined\n                            v-model=\"taskMinutes\"\n                        ></v-text-field>\n                      </v-flex>\n                    </template>\n                    <template v-else>\n                      <v-flex xs12>\n                        <v-text-field\n                            :label=\"$store.state.tasks[findIndexTasks(chosenTaskId)].type\"\n                            outlined\n                            v-model=\"taskNum\"\n                        ></v-text-field>\n                      </v-flex>\n                    </template>\n                    <v-btn class=\"mb-2\" width=\"290px\"\n                           @click=\"changeTask\"\n                           height=\"50px\"\n                           color=\"white\">add\n                    </v-btn>\n                  </v-row>\n                </v-layout>\n              </v-container>\n            </div>\n          </slot>\n        </div>\n      </div>\n    </template>\n\n\n    <template v-if=\"isTaskInfo\">\n      <div class=\"picker\" @click=\"isTaskInfo=false\">\n        <div class=\"picker__content\" @click.stop>\n          <slot>\n            <h1>Hello World</h1>\n          </slot>\n        </div>\n      </div>\n    </template>\n\n\n    <Footer>\n\n    </Footer>\n  </div>\n</template>\n\n<script>\nimport Footer from \"@/components/Footer\";\nimport moment from \"moment\";\n\nexport default {\n  name: \"ListTasks\",\n  components: {Footer},\n  data() {\n    return {\n      taskHours: 0,\n      taskMinutes: 0,\n      taskNum: 0,\n      isAddNum: false,\n      isTaskInfo: false,\n      chosenTaskId: -1,\n      taskPieces: [],\n    }\n  },\n  methods: {\n    async getTasks() {\n      console.log('hi there too')\n      let response = await this.$store.state.makeReq('api/getTasks', 'GET')\n\n      let tasks = await response.json()\n      console.log('tasls = ', tasks)\n      if (tasks === null) {\n        tasks = []\n      }\n\n      this.$store.state.tasks = tasks\n      console.log('resp = ', this.$store.state.tasks)\n      localStorage.setItem('tasks', JSON.stringify(this.$store.state.tasks))\n      console.log(this.$store.state.tasks)\n    },\n\n    openChangeTask(taskId) {\n      this.isAddNum = true\n      this.chosenTaskId = taskId\n      this.getTaskPieces()\n      console.log('hi')\n    },\n    async getTaskPieces(){\n      let response = await this.$store.state.makeReq(\"api/getTaskPieces\", \"POST\", JSON.stringify({id:this.chosenTaskId}))\n      let tasksPieces = await response.json()\n      console.log('tasls = ', tasksPieces)\n      if (tasksPieces === null) {\n        tasksPieces = []\n      }\n\n      this.taskPieces = tasksPieces\n      console.log(\"pieces = \", tasksPieces)\n\n    },\n    async changeTask() {\n      let index = this.findIndexTasks(this.chosenTaskId)\n      let task = this.$store.state.tasks[index]\n      let num = 0\n      let deltaNum = 0\n      console.log({task})\n      if (parseInt(this.taskNum) > 0 || parseInt(this.taskHours) >= 0 && parseInt(this.taskMinutes) >= 0) {\n        if (task.type === 'time') {\n          console.log(\"hi there\")\n          console.log('calc = ', parseInt(this.$store.state.tasks[index].num) + parseInt((parseInt(this.taskHours) * 60 + parseInt(this.taskMinutes)) * 60))\n          num = parseInt(this.$store.state.tasks[index].num) + parseInt((parseInt(this.taskHours) * 60 + parseInt(this.taskMinutes)) * 60)\n          deltaNum = parseInt((parseInt(this.taskHours) * 60 + parseInt(this.taskMinutes)) * 60)\n        } else {\n          num = parseInt(this.$store.state.tasks[index].num) + parseInt(this.taskNum)\n          deltaNum = parseInt(this.taskNum)\n        }\n        this.$store.state.tasks[index].num = num\n      }\n      localStorage.setItem('tasks', JSON.stringify(this.$store.state.tasks))\n      console.log(task)\n      let newTask = {\n        id: task.id,\n        title: task.title,\n        timeStart: task.timeStart,\n        timeEnd: task.timeEnd,\n        type: task.type,\n        target: task.target,\n        num: num,\n        deltaNum: deltaNum,\n      }\n      let response = await this.$store.state.makeReq('api/changeTask', 'PUT', JSON.stringify(newTask))\n      console.log(response)\n      this.isAddNum = false\n      this.taskHours = 0\n      this.taskMinutes = 0\n      this.taskNum = 0\n    },\n    deleteTask(id) {\n      let index = this.findIndexTasks(id)\n      let task = this.$store.state.tasks[index]\n\n      // console.log(\"index = \", index)\n      // console.log({event})\n\n      let waitSeconds = 3\n      task.waitSeconds = waitSeconds\n      let intervalId = setInterval(() => {\n        if (!task.deleted) {\n          clearInterval(intervalId)\n          localStorage.setItem('tasks', JSON.stringify(this.$store.state.tasks))\n          this.$forceUpdate()\n          return\n        }\n        if (--waitSeconds < 0) {\n          clearInterval(intervalId);\n          let index = this.findIndexTasks(id)\n          this.$store.state.makeReq(\"api/deleteTask\", \"DELETE\", JSON.stringify({id: id}))\n          this.$store.state.tasks.splice(index, 1)\n        } else {\n          task.waitSeconds = waitSeconds\n        }\n        this.$forceUpdate()\n      }, 1000);\n\n      // this.$store.state.events.splice(index, 1)\n\n      task.deleted = Date.now();\n      this.$forceUpdate();\n      localStorage.setItem('events', JSON.stringify(this.$store.state.events))\n    },\n    camebackTask(id) {\n      let index = this.findIndexTasks(id)\n      this.$store.state.tasks[index].deleted = 0\n      this.$forceUpdate();\n    },\n    timeLeft(date) {\n      // console.log(date)\n      // let arr = moment(date).fromNow().split(' ')\n      // console.log(arr)\n      // arr.splice(0,1)\n      // console.log(arr)\n      // return \"–æ—Å—Ç–∞–ª–æ—Å—å \"+arr.join(\" \")\n      return moment(date).fromNow()\n    },\n    calcProgress(taskId) {\n      let task = this.$store.state.tasks[this.findIndexTasks(taskId)]\n      if (task.type === 'time') {\n        return this.makeMinutesAndHoursStr(parseInt(parseInt(task.num) / 3600), parseInt(task.num) % 3600 / 60) + \" / \" + this.makeMinutesAndHoursStr(parseInt(parseInt(task.target) / 3600), parseInt(task.target) % 3600 / 60)\n      } else {\n        return task.num + ' / ' + task.target\n      }\n    },\n    calcPercent(task) {\n      let num = 0\n      if (task.num !== undefined) {\n        num = task.num\n      }\n      // console.log('percentege = ', num/task.target*100)\n      return num / task.target * 100 > 100 ? 100 : num / task.target * 100\n    },\n    makeMinutesAndHoursStr(hours, minutes) {\n      hours = hours.toString().length === 1 ? '0' + hours : hours\n      minutes = minutes.toString().length === 1 ? '0' + minutes : minutes\n      return hours + ':' + minutes\n    },\n    findIndexTasks(id) {\n      for (let i = 0; i < this.$store.state.tasks.length; i++) {\n        if (this.$store.state.tasks[i].id === id) {\n          return i\n        }\n      }\n      return -1\n    },\n  },\n  beforeMount() {\n    console.log('hi there')\n    this.getTasks()\n  }\n}\n</script>\n\n<style scoped>\n.picker {\n  color: white;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  left: 0;\n  background-color: rgba(0, 0, 0, 0.5);\n  position: fixed;\n  z-index: 100;\n  overflow: auto;\n  display: flex;\n  padding-top: 80px;\n}\n\n.picker__content {\n  /*overflow-y: scroll;*/\n  display: block;\n  width: 290px;\n  margin: auto;\n\n\n  min-height: 100%;\n  justify-content: space-between;\n  z-index: 200;\n}\n</style>"]}]}
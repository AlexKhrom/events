{"remainingRequest":"/Users/mac/Desktop/events/static/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mac/Desktop/events/static/src/components/ListEvents.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mac/Desktop/events/static/src/components/ListEvents.vue","mtime":1657700589673},{"path":"/Users/mac/Desktop/events/static/node_modules/cache-loader/dist/cjs.js","mtime":1656160197065},{"path":"/Users/mac/Desktop/events/static/node_modules/babel-loader/lib/index.js","mtime":1656160197672},{"path":"/Users/mac/Desktop/events/static/node_modules/cache-loader/dist/cjs.js","mtime":1656160197065},{"path":"/Users/mac/Desktop/events/static/node_modules/vue-loader/lib/index.js","mtime":1656160198005}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBtb21lbnQgZnJvbSAibW9tZW50IjsKCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImxpc3RFdmVudHMiLAogIGZpbHRlcnM6IHsKICAgIG1vbWVudChkYXRlKSB7CiAgICAgIHJldHVybiBtb21lbnQoZGF0ZSkuZm9ybWF0KCJEIE1NTU0iKTsKICAgIH0sCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaXNDaGFuZ2VFdmVudDogZmFsc2UsCiAgICAgIGlzQ2hhbmdlRXZlbnRXaXRoRHVyYXRpb246IGZhbHNlLAogICAgICBzdGFydEV2ZW50VGltZTogbnVsbCwKICAgICAgZW5kRXZlbnRUaW1lOiBudWxsLAogICAgICB0aW1lUGlja2VyOiAiIiwKICAgICAgcGVyY2VudE9mRXZlbnRUaW1lOiAwLAogICAgICBkYXRlUGlja2VyOiAobmV3IERhdGUoRGF0ZS5ub3coKSAtIChuZXcgRGF0ZSgpKS5nZXRUaW1lem9uZU9mZnNldCgpICogNjAwMDApKS50b0lTT1N0cmluZygpLnN1YnN0cigwLCAxMCksCgogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGV2ZW50c0FycmF5KCkgewogICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLiRzdG9yZS5zdGF0ZS5ldmVudHMuc2xpY2UoKS5zb3J0KChhLCBiKSA9PgogICAgICAvLyAgICAgYS5kdCA8IGIuZHQgPyAxIDogLTEpKQogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuZXZlbnRzLnNsaWNlKCkuc29ydCgoYSwgYikgPT4KICAgICAgICAgIGEuZHQgPCBiLmR0ID8gMSA6IC0xKQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgZGVsZXRlRXZlbnQoaWQpIHsKICAgICAgbGV0IGluZGV4ID0gdGhpcy5maW5kSW5kZXhFdmVudHMoaWQpCiAgICAgIGxldCBldmVudCA9IHRoaXMuJHN0b3JlLnN0YXRlLmV2ZW50c1tpbmRleF0KCiAgICAgIC8vIGNvbnNvbGUubG9nKCJpbmRleCA9ICIsIGluZGV4KQogICAgICAvLyBjb25zb2xlLmxvZyh7ZXZlbnR9KQoKICAgICAgbGV0IHdhaXRTZWNvbmRzID0gMwogICAgICBldmVudC53YWl0U2Vjb25kcyA9IHdhaXRTZWNvbmRzCiAgICAgIGxldCBpbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICAgIGlmICghZXZlbnQuZGVsZXRlZCkgewogICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbElkKQogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2V2ZW50cycsIEpTT04uc3RyaW5naWZ5KHRoaXMuJHN0b3JlLnN0YXRlLmV2ZW50cykpCiAgICAgICAgICB0aGlzLiRmb3JjZVVwZGF0ZSgpCiAgICAgICAgICByZXR1cm4KICAgICAgICB9CiAgICAgICAgaWYgKC0td2FpdFNlY29uZHMgPCAwKSB7CiAgICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsSWQpOwogICAgICAgICAgbGV0IGluZGV4ID0gdGhpcy5maW5kSW5kZXhFdmVudHMoaWQpCiAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5ldmVudHMuc3BsaWNlKGluZGV4LCAxKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBldmVudC53YWl0U2Vjb25kcyA9IHdhaXRTZWNvbmRzCiAgICAgICAgfQogICAgICAgIHRoaXMuJGZvcmNlVXBkYXRlKCkKICAgICAgfSwgMTAwMCk7CgogICAgICAvLyB0aGlzLiRzdG9yZS5zdGF0ZS5ldmVudHMuc3BsaWNlKGluZGV4LCAxKQoKICAgICAgZXZlbnQuZGVsZXRlZCA9IERhdGUubm93KCk7CiAgICAgIHRoaXMuJGZvcmNlVXBkYXRlKCk7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdldmVudHMnLCBKU09OLnN0cmluZ2lmeSh0aGlzLiRzdG9yZS5zdGF0ZS5ldmVudHMpKQogICAgfSwKICAgIGNhbWViYWNrRXZlbnQoaWQpIHsKICAgICAgbGV0IGluZGV4ID0gdGhpcy5maW5kSW5kZXhFdmVudHMoaWQpCiAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmV2ZW50c1tpbmRleF0uZGVsZXRlZCA9IDAKICAgICAgdGhpcy4kZm9yY2VVcGRhdGUoKTsKICAgIH0sCiAgICBjaGFuZ2VFdmVudChpZCkgewogICAgICBsZXQgaW5kZXggPSB0aGlzLmZpbmRJbmRleEV2ZW50cyhpZCkKICAgICAgbGV0IGRhdGUgPSBuZXcgRGF0ZSh0aGlzLiRzdG9yZS5zdGF0ZS5ldmVudHNbaW5kZXhdLmR0KQogICAgICB0aGlzLnNlbGVjdGVkRXZlbnRJbmRleCA9IGluZGV4CiAgICAgIGlmICh0aGlzLiRzdG9yZS5zdGF0ZS5ldmVudHNbaW5kZXhdLnRpbWVTdGFydCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgbGV0IHdhc0RhdGVTdGFydCA9IG5ldyBEYXRlKHRoaXMuJHN0b3JlLnN0YXRlLmV2ZW50c1tpbmRleF0udGltZVN0YXJ0KQogICAgICAgIGxldCB3YXNEYXRlRW5kID0gbmV3IERhdGUodGhpcy4kc3RvcmUuc3RhdGUuZXZlbnRzW2luZGV4XS50aW1lRW5kKQogICAgICAgIHRoaXMuc3RhcnRFdmVudFRpbWUgPSB3YXNEYXRlU3RhcnQuZ2V0SG91cnMoKSArICI6IiArIHdhc0RhdGVTdGFydC5nZXRNaW51dGVzKCkKICAgICAgICB0aGlzLmVuZEV2ZW50VGltZSA9IHdhc0RhdGVFbmQuZ2V0SG91cnMoKSArICI6IiArIHdhc0RhdGVFbmQuZ2V0TWludXRlcygpCiAgICAgICAgdGhpcy5kYXRlUGlja2VyID0gKG5ldyBEYXRlKGRhdGUgLSAobmV3IERhdGUoKSkuZ2V0VGltZXpvbmVPZmZzZXQoKSAqIDYwMDAwKSkudG9JU09TdHJpbmcoKS5zdWJzdHIoMCwgMTApCgogICAgICAgIGNvbnNvbGUubG9nKHRoaXMuc3RhcnRFdmVudFRpbWUpCiAgICAgICAgY29uc29sZS5sb2codGhpcy5lbmRFdmVudFRpbWUpCiAgICAgICAgdGhpcy5pc0NoYW5nZUV2ZW50V2l0aER1cmF0aW9uID0gdHJ1ZQoKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnRpbWVQaWNrZXIgPSBkYXRlLmdldEhvdXJzKCkgKyAiOiIgKyBkYXRlLmdldE1pbnV0ZXMoKQogICAgICAgIHRoaXMuZGF0ZVBpY2tlciA9IChuZXcgRGF0ZShkYXRlIC0gKG5ldyBEYXRlKCkpLmdldFRpbWV6b25lT2Zmc2V0KCkgKiA2MDAwMCkpLnRvSVNPU3RyaW5nKCkuc3Vic3RyKDAsIDEwKQogICAgICAgIHRoaXMuaXNDaGFuZ2VFdmVudCA9IHRydWUKICAgICAgICB0aGlzLiRmb3JjZVVwZGF0ZSgpOwogICAgICB9CiAgICB9LAogICAgc2F2ZUV2ZW50V2l0aER1cmF0aW9uQ2hhbmdlcygpIHsKICAgICAgbGV0IHN0YXJ0RGF0ZSA9IHRoaXMubWFrZURhdGUodGhpcy5kYXRlUGlja2VyLCB0aGlzLnN0YXJ0RXZlbnRUaW1lKQogICAgICAvLyBsZXQgc3RhcnREYXRlID0gbmV3IERhdGUodGhpcy5kYXRlUGlja2VyICsgIlQiICsgdGhpcy5zdGFydEV2ZW50VGltZSkKICAgICAgbGV0IGVuZERhdGUgPSB0aGlzLm1ha2VEYXRlKHRoaXMuZGF0ZVBpY2tlciwgdGhpcy5lbmRFdmVudFRpbWUpCiAgICAgIC8vIGxldCBlbmREYXRlID0gbmV3IERhdGUodGhpcy5kYXRlUGlja2VyICsgIlQiICsgdGhpcy5lbmRFdmVudFRpbWUpCgogICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5ldmVudHNbdGhpcy5zZWxlY3RlZEV2ZW50SW5kZXhdLnRpbWVTdGFydCA9IHN0YXJ0RGF0ZS5nZXRUaW1lKCkgKyB0aGlzLiRzdG9yZS5zdGF0ZS5ldmVudHNbdGhpcy5zZWxlY3RlZEV2ZW50SW5kZXhdLmR0ICUgMTAwMAogICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5ldmVudHNbdGhpcy5zZWxlY3RlZEV2ZW50SW5kZXhdLnRpbWVFbmQgPSBlbmREYXRlLmdldFRpbWUoKSArIHRoaXMuJHN0b3JlLnN0YXRlLmV2ZW50c1t0aGlzLnNlbGVjdGVkRXZlbnRJbmRleF0uZHQgJSAxMDAwCiAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmV2ZW50c1t0aGlzLnNlbGVjdGVkRXZlbnRJbmRleF0uZHQgPSB0aGlzLiRzdG9yZS5zdGF0ZS5ldmVudHNbdGhpcy5zZWxlY3RlZEV2ZW50SW5kZXhdLnRpbWVTdGFydAoKCiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdldmVudHMnLCBKU09OLnN0cmluZ2lmeSh0aGlzLiRzdG9yZS5zdGF0ZS5ldmVudHMpKQogICAgICB0aGlzLmlzQ2hhbmdlRXZlbnRXaXRoRHVyYXRpb24gPSBmYWxzZQogICAgICB0aGlzLnNvcnRFdmVudHMoKQogICAgfSwKICAgIHNhdmVFdmVudENoYW5nZXMoKSB7CiAgICAgIGxldCBkYXRlID0gdGhpcy5tYWtlRGF0ZSh0aGlzLmRhdGVQaWNrZXIsIHRoaXMudGltZVBpY2tlcikKICAgICAgLy8gbGV0IGRhdGUgPSBuZXcgRGF0ZSh0aGlzLmRhdGVQaWNrZXIgKyAiVCIgKyB0aGlzLnRpbWVQaWNrZXIpCiAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmV2ZW50c1t0aGlzLnNlbGVjdGVkRXZlbnRJbmRleF0uZHQgPSBkYXRlLmdldFRpbWUoKSArIHRoaXMuJHN0b3JlLnN0YXRlLmV2ZW50c1t0aGlzLnNlbGVjdGVkRXZlbnRJbmRleF0uZHQgJSAxMDAwCiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdldmVudHMnLCBKU09OLnN0cmluZ2lmeSh0aGlzLiRzdG9yZS5zdGF0ZS5ldmVudHMpKQogICAgICB0aGlzLmlzQ2hhbmdlRXZlbnQgPSBmYWxzZQogICAgICB0aGlzLnNvcnRFdmVudHMoKQogICAgfSwKICAgIGNhbGNUaW1lUGVyY2VudChpbmRleCkgewogICAgICBpZiAodGhpcy4kc3RvcmUuc3RhdGUuZXZlbnRzW2luZGV4XS50aW1lU3RhcnQgPT09IHVuZGVmaW5lZCkgewogICAgICAgIHJldHVybiAxMDAKICAgICAgfQogICAgICBpZiAoKHRoaXMuJHN0b3JlLnN0YXRlLmV2ZW50c1tpbmRleF0udGltZUVuZCAtIHRoaXMuJHN0b3JlLnN0YXRlLmV2ZW50c1tpbmRleF0udGltZVN0YXJ0KTw9MCkKICAgICAgICByZXR1cm4gMAoKICAgICAgbGV0IHRpbWVGb3JEYXkgPSAwCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5ldmVudHNBcnJheS5sZW5ndGg7IGkrKykgewogICAgICAgIGlmICgobmV3IERhdGUodGhpcy4kc3RvcmUuc3RhdGUuZXZlbnRzW2ldLmR0KSkuZ2V0RGF0ZSgpID09PSAobmV3IERhdGUodGhpcy4kc3RvcmUuc3RhdGUuZXZlbnRzW2luZGV4XS5kdCkpLmdldERhdGUoKQogICAgICAgICAgICAmJiB0aGlzLiRzdG9yZS5zdGF0ZS5ldmVudHNbaV0udGltZVN0YXJ0ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHRpbWVGb3JEYXkgKz0gdGhpcy4kc3RvcmUuc3RhdGUuZXZlbnRzW2ldLnRpbWVFbmQgLSB0aGlzLiRzdG9yZS5zdGF0ZS5ldmVudHNbaV0udGltZVN0YXJ0CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiB0aGlzLnBlcmNlbnRPZkV2ZW50VGltZSA9ICh0aGlzLiRzdG9yZS5zdGF0ZS5ldmVudHNbaW5kZXhdLnRpbWVFbmQgLSB0aGlzLiRzdG9yZS5zdGF0ZS5ldmVudHNbaW5kZXhdLnRpbWVTdGFydCkgLyB0aW1lRm9yRGF5ICogMTAwCiAgICB9LAogICAgYm9yZGVyQ29sb3JGb3JFdmVudChpbmRleCkgewogICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLiRzdG9yZS5zdGF0ZS5ldmVudHNbaW5kZXhdLnRpbWVTdGFydCA9PT0gdW5kZWZpbmVkID8gImJsdWUiIDogImdyZWVuIikKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmV2ZW50c1tpbmRleF0udGltZVN0YXJ0ID09PSB1bmRlZmluZWQgPyAibm9uZSIgOiAiZ3JlZW4iLy9yZ2IoNDcsMTAxLDE4NiktYmx1ZQogICAgfSwKICAgIHNvcnRFdmVudHMoKSB7CiAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmV2ZW50cyA9IHRoaXMuJHN0b3JlLnN0YXRlLmV2ZW50cy5zbGljZSgpLnNvcnQoKGEsIGIpID0+CiAgICAgICAgICBhLmR0IDwgYi5kdCA/IDEgOiAtMSkKICAgIH0sCgogICAgaXNOZXdEYXkoaW5kZXgpIHsKICAgICAgaWYgKGluZGV4ID09PSAwKSB7CiAgICAgICAgcmV0dXJuIHRydWUKICAgICAgfQogICAgICAvLyBjb25zb2xlLmxvZyhpbmRleCwgKG5ldyBEYXRlKHRoaXMuZXZlbnRzQXJyYXlbaW5kZXggLSAxXS5kdCkpLmdldERhdGUoKSwgKG5ldyBEYXRlKHRoaXMuZXZlbnRzQXJyYXlbaW5kZXhdLmR0KSkuZ2V0RGF0ZSgpKQogICAgICByZXR1cm4gKG5ldyBEYXRlKHRoaXMuZXZlbnRzQXJyYXlbaW5kZXggLSAxXS5kdCkpLmdldERhdGUoKSAhPT0gKG5ldyBEYXRlKHRoaXMuZXZlbnRzQXJyYXlbaW5kZXhdLmR0KSkuZ2V0RGF0ZSgpOwogICAgfSwKCiAgICBwcmludEV2ZW50RHVyYXRpb24oZXZlbnQpIHsKICAgICAgbGV0IGhvdXJzID0gTWF0aC5mbG9vcigoZXZlbnQudGltZUVuZCAtIGV2ZW50LnRpbWVTdGFydCkgLyAoMzYwMDAwMCkpCiAgICAgIGxldCBtaW51dGVzID0gTWF0aC5mbG9vcigoZXZlbnQudGltZUVuZCAtIGV2ZW50LnRpbWVTdGFydCkgJSAoMzYwMDAwMCkgLyA2MDAwMCkKICAgICAgbWludXRlcyA9IG1pbnV0ZXMudG9TdHJpbmcoKS5sZW5ndGggPT09IDEgPyAnMCcgKyBtaW51dGVzIDogbWludXRlcwogICAgICByZXR1cm4gaG91cnMgKyAiOiIgKyBtaW51dGVzCiAgICB9LAoKICAgIGdldEhvdXJBbmRNaW51dGVzKGV2ZW50KSB7CiAgICAgIGxldCBob3VyID0gbW9tZW50KGV2ZW50LmR0KS5ob3VyKCkKICAgICAgbGV0IG1pbnV0ZXMgPSBtb21lbnQoZXZlbnQuZHQpLm1pbnV0ZXMoKS50b1N0cmluZygpLmxlbmd0aCA9PT0gMSA/ICIwIiArIG1vbWVudChldmVudC5kdCkubWludXRlcygpIDogbW9tZW50KGV2ZW50LmR0KS5taW51dGVzKCkKICAgICAgcmV0dXJuIGhvdXIgKyAiOiIgKyBtaW51dGVzCiAgICB9LAogICAgbWFrZURhdGUoZGF0ZSwgdGltZSwgc2Vjb25kcywgbWlsbGlzZWNvbmRzKSB7CiAgICAgIGRhdGUgPSBkYXRlID09PSB1bmRlZmluZWQgPyAiIiA6IGRhdGUKICAgICAgdGltZSA9IHRpbWUgPT09IHVuZGVmaW5lZCA/ICIiIDogIlQiICsgdGltZQogICAgICBzZWNvbmRzID0gc2Vjb25kcyA9PT0gdW5kZWZpbmVkID8gIiIgOiAiOiIgKyBzZWNvbmRzCiAgICAgIG1pbGxpc2Vjb25kcyA9IG1pbGxpc2Vjb25kcyA9PT0gdW5kZWZpbmVkID8gIiIgOiAiLiIgKyBtaWxsaXNlY29uZHMKCiAgICAgIHJldHVybiBuZXcgRGF0ZShkYXRlICsgdGltZSArIHNlY29uZHMgKyBtaWxsaXNlY29uZHMpCiAgICB9LAogICAgZmluZEluZGV4RXZlbnRzKGlkKSB7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy4kc3RvcmUuc3RhdGUuZXZlbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKHRoaXMuJHN0b3JlLnN0YXRlLmV2ZW50c1tpXS5kdCA9PT0gaWQpIHsKICAgICAgICAgIHJldHVybiBpCiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiAtMQogICAgfSwKICB9Cn0K"},{"version":3,"sources":["ListEvents.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqHA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ListEvents.vue","sourceRoot":"src/components","sourcesContent":["<!--evets = []event{-->\n<!--  dt: date of creat event-->\n<!--  title: name of event-->\n<!--  timeStart: date of start doing smth-->\n<!--  timeEnd: date of finish doing smth-->\n<!--}-->\n<template>\n  <div>\n    <template v-if=\"isChangeEvent\">\n      <div class=\"picker\" @click=\"isChangeEvent=false\">\n        <div class=\"picker__content\" @click.stop>\n          <slot>\n            <v-row justify=\"space-around\">\n              <v-col>\n                <v-time-picker\n                    format=\"24hr\"\n                    v-model=\"timePicker\"\n                ></v-time-picker>\n              </v-col>\n              <v-col>\n                <v-date-picker\n                    v-model=\"datePicker\"\n                    color=\"primary lighten-1\"\n                ></v-date-picker>\n              </v-col>\n              <v-col>\n                <v-btn class=\"mb-4\" width=\"290px\"\n                       @click=\"saveEventChanges\"\n                       color=\"primary\">save\n                </v-btn>\n              </v-col>\n            </v-row>\n          </slot>\n        </div>\n      </div>\n    </template>\n\n    <template v-if=\"isChangeEventWithDuration\">\n      <div class=\"picker\" @click=\"isChangeEventWithDuration=false\">\n        <div class=\"picker__content\" @click.stop>\n          <slot>\n            <div>\n              <h1>Change your event:</h1>\n              <v-row\n                  justify=\"space-around\"\n                  align=\"center\"\n              >\n                <v-col style=\"width: 350px; flex: 0 1 auto;\">\n                  <h2>Start:</h2>\n                  <v-time-picker\n                      format=\"24hr\"\n                      v-model=\"startEventTime\"\n                      :max=\"endEventTime\"\n                  ></v-time-picker>\n                </v-col>\n                <v-col style=\"width: 350px; flex: 0 1 auto;\">\n                  <h2>End:</h2>\n                  <v-time-picker\n                      format=\"24hr\"\n                      v-model=\"endEventTime\"\n                      :min=\"startEventTime\"\n                  ></v-time-picker>\n                </v-col>\n                <v-col>\n                  <v-date-picker\n                      v-model=\"datePicker\"\n                      color=\"primary lighten-1\"\n                  ></v-date-picker>\n                </v-col>\n                <v-col>\n                  <v-btn class=\"mb-2\" width=\"290px\"\n                         @click=\"saveEventWithDurationChanges\"\n                         height=\"50px\"\n                         color=\"primary\">save\n                  </v-btn>\n                </v-col>\n              </v-row>\n            </div>\n          </slot>\n        </div>\n      </div>\n    </template>\n\n\n    <div v-for=\"(event,index) in this.$store.state.events\"\n         :key=\"event.title+event.dt\"\n    >\n      <div v-if=\"isNewDay(index)\" style=\"margin-top: 20px;color: #555555\">{{ new Date(event.dt) | moment }}</div>\n      <div\n          style=\"display: flex;justify-content: space-between;margin-top: 20px;padding:5px;\">\n        <div>\n          <div :style=\"event.deleted?'opacity: 0.5':''\"\n               style=\"font-size: 18px;text-transform: capitalize;display: flex;align-items: center;\">{{ event.title }}\n          </div>\n          <span v-if=\"!event.deleted\" style=\"color: #555;font-size: 11px;display: block\">{{\n              getHourAndMinutes(event)\n            }}</span>\n        </div>\n        <div>\n          <span v-if=\"event.deleted\" style=\"color: #555;font-size: 12px;padding-right: 10px\">{{\n              event.waitSeconds\n            }}с</span>\n          <span v-if=\"event.timeStart!==undefined&&!event.deleted\" style=\"color: #555;font-size: 14px;\">\n            {{ printEventDuration(event) }}\n          </span>\n          <v-btn v-if=\"!event.deleted\" @click=\"changeEvent(event.dt)\" icon>✏️</v-btn>\n          <v-btn v-if=\"event.deleted\" @click=\"camebackEvent(event.dt)\" text small>вернуть ↩︎</v-btn>\n          <v-btn v-else @click=\"deleteEvent(event.dt)\" icon>🗑</v-btn>\n        </div>\n      </div>\n      <div :style=\"{border: '2px solid '+borderColorForEvent(index),width: calcTimePercent(index) +'%'}\"\n      ></div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport moment from \"moment\";\n\n\nexport default {\n  name: \"listEvents\",\n  filters: {\n    moment(date) {\n      return moment(date).format(\"D MMMM\");\n    },\n  },\n  data() {\n    return {\n      isChangeEvent: false,\n      isChangeEventWithDuration: false,\n      startEventTime: null,\n      endEventTime: null,\n      timePicker: \"\",\n      percentOfEventTime: 0,\n      datePicker: (new Date(Date.now() - (new Date()).getTimezoneOffset() * 60000)).toISOString().substr(0, 10),\n\n    }\n  },\n  computed: {\n    eventsArray() {\n      // console.log(this.$store.state.events.slice().sort((a, b) =>\n      //     a.dt < b.dt ? 1 : -1))\n      return this.$store.state.events.slice().sort((a, b) =>\n          a.dt < b.dt ? 1 : -1)\n    }\n  },\n  methods: {\n    deleteEvent(id) {\n      let index = this.findIndexEvents(id)\n      let event = this.$store.state.events[index]\n\n      // console.log(\"index = \", index)\n      // console.log({event})\n\n      let waitSeconds = 3\n      event.waitSeconds = waitSeconds\n      let intervalId = setInterval(() => {\n        if (!event.deleted) {\n          clearInterval(intervalId)\n          localStorage.setItem('events', JSON.stringify(this.$store.state.events))\n          this.$forceUpdate()\n          return\n        }\n        if (--waitSeconds < 0) {\n          clearInterval(intervalId);\n          let index = this.findIndexEvents(id)\n          this.$store.state.events.splice(index, 1)\n        } else {\n          event.waitSeconds = waitSeconds\n        }\n        this.$forceUpdate()\n      }, 1000);\n\n      // this.$store.state.events.splice(index, 1)\n\n      event.deleted = Date.now();\n      this.$forceUpdate();\n      localStorage.setItem('events', JSON.stringify(this.$store.state.events))\n    },\n    camebackEvent(id) {\n      let index = this.findIndexEvents(id)\n      this.$store.state.events[index].deleted = 0\n      this.$forceUpdate();\n    },\n    changeEvent(id) {\n      let index = this.findIndexEvents(id)\n      let date = new Date(this.$store.state.events[index].dt)\n      this.selectedEventIndex = index\n      if (this.$store.state.events[index].timeStart !== undefined) {\n        let wasDateStart = new Date(this.$store.state.events[index].timeStart)\n        let wasDateEnd = new Date(this.$store.state.events[index].timeEnd)\n        this.startEventTime = wasDateStart.getHours() + \":\" + wasDateStart.getMinutes()\n        this.endEventTime = wasDateEnd.getHours() + \":\" + wasDateEnd.getMinutes()\n        this.datePicker = (new Date(date - (new Date()).getTimezoneOffset() * 60000)).toISOString().substr(0, 10)\n\n        console.log(this.startEventTime)\n        console.log(this.endEventTime)\n        this.isChangeEventWithDuration = true\n\n      } else {\n        this.timePicker = date.getHours() + \":\" + date.getMinutes()\n        this.datePicker = (new Date(date - (new Date()).getTimezoneOffset() * 60000)).toISOString().substr(0, 10)\n        this.isChangeEvent = true\n        this.$forceUpdate();\n      }\n    },\n    saveEventWithDurationChanges() {\n      let startDate = this.makeDate(this.datePicker, this.startEventTime)\n      // let startDate = new Date(this.datePicker + \"T\" + this.startEventTime)\n      let endDate = this.makeDate(this.datePicker, this.endEventTime)\n      // let endDate = new Date(this.datePicker + \"T\" + this.endEventTime)\n\n      this.$store.state.events[this.selectedEventIndex].timeStart = startDate.getTime() + this.$store.state.events[this.selectedEventIndex].dt % 1000\n      this.$store.state.events[this.selectedEventIndex].timeEnd = endDate.getTime() + this.$store.state.events[this.selectedEventIndex].dt % 1000\n      this.$store.state.events[this.selectedEventIndex].dt = this.$store.state.events[this.selectedEventIndex].timeStart\n\n\n      localStorage.setItem('events', JSON.stringify(this.$store.state.events))\n      this.isChangeEventWithDuration = false\n      this.sortEvents()\n    },\n    saveEventChanges() {\n      let date = this.makeDate(this.datePicker, this.timePicker)\n      // let date = new Date(this.datePicker + \"T\" + this.timePicker)\n      this.$store.state.events[this.selectedEventIndex].dt = date.getTime() + this.$store.state.events[this.selectedEventIndex].dt % 1000\n      localStorage.setItem('events', JSON.stringify(this.$store.state.events))\n      this.isChangeEvent = false\n      this.sortEvents()\n    },\n    calcTimePercent(index) {\n      if (this.$store.state.events[index].timeStart === undefined) {\n        return 100\n      }\n      if ((this.$store.state.events[index].timeEnd - this.$store.state.events[index].timeStart)<=0)\n        return 0\n\n      let timeForDay = 0\n      for (let i = 0; i < this.eventsArray.length; i++) {\n        if ((new Date(this.$store.state.events[i].dt)).getDate() === (new Date(this.$store.state.events[index].dt)).getDate()\n            && this.$store.state.events[i].timeStart !== undefined) {\n          timeForDay += this.$store.state.events[i].timeEnd - this.$store.state.events[i].timeStart\n        }\n      }\n      return this.percentOfEventTime = (this.$store.state.events[index].timeEnd - this.$store.state.events[index].timeStart) / timeForDay * 100\n    },\n    borderColorForEvent(index) {\n      // console.log(this.$store.state.events[index].timeStart === undefined ? \"blue\" : \"green\")\n      return this.$store.state.events[index].timeStart === undefined ? \"none\" : \"green\"//rgb(47,101,186)-blue\n    },\n    sortEvents() {\n      this.$store.state.events = this.$store.state.events.slice().sort((a, b) =>\n          a.dt < b.dt ? 1 : -1)\n    },\n\n    isNewDay(index) {\n      if (index === 0) {\n        return true\n      }\n      // console.log(index, (new Date(this.eventsArray[index - 1].dt)).getDate(), (new Date(this.eventsArray[index].dt)).getDate())\n      return (new Date(this.eventsArray[index - 1].dt)).getDate() !== (new Date(this.eventsArray[index].dt)).getDate();\n    },\n\n    printEventDuration(event) {\n      let hours = Math.floor((event.timeEnd - event.timeStart) / (3600000))\n      let minutes = Math.floor((event.timeEnd - event.timeStart) % (3600000) / 60000)\n      minutes = minutes.toString().length === 1 ? '0' + minutes : minutes\n      return hours + \":\" + minutes\n    },\n\n    getHourAndMinutes(event) {\n      let hour = moment(event.dt).hour()\n      let minutes = moment(event.dt).minutes().toString().length === 1 ? \"0\" + moment(event.dt).minutes() : moment(event.dt).minutes()\n      return hour + \":\" + minutes\n    },\n    makeDate(date, time, seconds, milliseconds) {\n      date = date === undefined ? \"\" : date\n      time = time === undefined ? \"\" : \"T\" + time\n      seconds = seconds === undefined ? \"\" : \":\" + seconds\n      milliseconds = milliseconds === undefined ? \"\" : \".\" + milliseconds\n\n      return new Date(date + time + seconds + milliseconds)\n    },\n    findIndexEvents(id) {\n      for (let i = 0; i < this.$store.state.events.length; i++) {\n        if (this.$store.state.events[i].dt === id) {\n          return i\n        }\n      }\n      return -1\n    },\n  }\n}\n</script>\n\n<style scoped>\n\n.picker {\n  color: white;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  left: 0;\n  background-color: rgba(0, 0, 0, 0.5);\n  position: fixed;\n  z-index: 100;\n  overflow: auto;\n  display: flex;\n  padding-top: 80px;\n}\n\n.picker__content {\n  /*overflow-y: scroll;*/\n  display: block;\n  width: 290px;\n  margin: auto;\n\n  min-height: 100%;\n  justify-content: space-between;\n  z-index: 200;\n}\n</style>"]}]}
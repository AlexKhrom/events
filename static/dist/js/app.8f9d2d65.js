(function(t){function e(e){for(var n,o,r=e[0],c=e[1],l=e[2],d=0,h=[];d<r.length;d++)o=r[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&h.push(a[o][0]),a[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(h.length)h.shift()();return i.push.apply(i,l||[]),s()}function s(){for(var t,e=0;e<i.length;e++){for(var s=i[e],n=!0,r=1;r<s.length;r++){var c=s[r];0!==a[c]&&(n=!1)}n&&(i.splice(e--,1),t=o(o.s=s[0]))}return t}var n={},a={app:0},i=[];function o(e){if(n[e])return n[e].exports;var s=n[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=n,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(s,n,function(e){return t[e]}.bind(null,n));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;i.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"0b7a":function(t,e,s){"use strict";s("a1c2")},"18b6":function(t,e,s){},4678:function(t,e,s){var n={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function a(t){var e=i(t);return s(e)}function i(t){if(!s.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}a.keys=function(){return Object.keys(n)},a.resolve=i,t.exports=a,a.id="4678"},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var n=s("2b0e"),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",{staticStyle:{padding:"20px"}},[s("router-view")],1)},i=[],o={name:"App",data:function(){return{}},methods:{}},r=o,c=s("2877"),l=s("6544"),u=s.n(l),d=s("7496"),h=Object(c["a"])(r,a,i,!1,null,"59b713fe",null),f=h.exports;u()(h,{VApp:d["a"]});var v=s("3835"),p=s("c7eb"),m=s("1da1"),g=(s("4de4"),s("d3b7"),s("2f62"));n["a"].use(g["a"]);var k={titles:JSON.parse(localStorage.getItem("titles")||"[]").filter((function(t){return!t.deleted})),events:JSON.parse(localStorage.getItem("events")||"[]").filter((function(t){return!t.deleted})),tasks:JSON.parse(localStorage.getItem("tasks")||"[]").filter((function(t){return!t.deleted})),user:{login:"",email:"",password:""},makeReq:function(t,e,s){return Object(m["a"])(Object(p["a"])().mark((function n(){var a;return Object(p["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(void 0!==s){n.next=6;break}return n.next=3,fetch(t,{method:e});case 3:a=n.sent,n.next=9;break;case 6:return n.next=8,fetch(t,{method:e,body:s});case 8:a=n.sent;case 9:if(!a.ok){n.next=14;break}return console.log("okkkk"),n.abrupt("return",a);case 14:if(!(a.status>299&&a.status<500)){n.next=19;break}return console.log("err"),n.abrupt("return","err");case 19:if(!(a.status>500)){n.next=22;break}return console.log("some wrong on backend"),n.abrupt("return","backend err");case 22:case"end":return n.stop()}}),n)})))()}},b={set:function(t,e){var s=Object(v["a"])(e,2),n=s[0],a=s[1];t[n]=a}},w=new g["a"].Store({state:k,mutations:b}),x=s("0086"),y=s.n(x),T=s("f309");n["a"].use(T["a"]);var j=new T["a"]({theme:{themes:{light:{primary:"#000000"}}}}),S=s("c1df"),E=s.n(S),$=s("8c4f"),D=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-form",{ref:"form",staticClass:"form",style:"margin-top:"+t.marginTop(),attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[s("v-text-field",{attrs:{size:"30px",rules:t.emailRules,label:"email",required:"",solo:""},model:{value:t.$store.state.user.email,callback:function(e){t.$set(t.$store.state.user,"email",e)},expression:"$store.state.user.email"}}),s("v-text-field",{attrs:{rules:t.passwordRules,label:"Password","append-icon":t.show?"mdi-eye":"mdi-eye-off",type:t.show?"text":"password",required:"",solo:""},on:{"click:append":function(e){t.show=!t.show}},model:{value:t.$store.state.user.password,callback:function(e){t.$set(t.$store.state.user,"password",e)},expression:"$store.state.user.password"}}),s("v-btn",{staticClass:"my-2",staticStyle:{height:"40px",width:"100px"},attrs:{disabled:!t.valid,color:"primary"},on:{click:t.validate}},[t._v(" Login ")]),s("v-btn",{staticClass:"my-2",staticStyle:{height:"40px","margin-left":"10px"},on:{click:function(e){t.$router.push("/signUp"),t.email="",t.login="",t.password=""}}},[t._v(" Sign up ")])],1),"signUpIsOk"===t.page?s("v-form",[s("div",{staticClass:"text-h2",staticStyle:{color:"limegreen"}},[t._v("login is successful")])]):t._e(),"wrong"===t.page?s("v-form",[s("div",{staticClass:"text-h2",staticStyle:{color:"red"}},[t._v("Wrong login or password")])]):t._e()],1)},O=[],_=(s("ac1f"),s("00b4"),s("4d63"),s("c607"),s("2c3e"),s("25f0"),s("e9c4"),s("4795"),s("5319"),s("1276"),{data:function(){return{page:"login",valid:!0,show:!1,login:"",email:"",code:"",loginRules:[function(t){return!!t||"Login is required"},function(t){return t&&t.length<=6||"Login must be less than 4 characters"}],password:"",passwordRules:[function(t){return!!t||"Password is required"},function(t){return t&&t.length<=10||"Password must be less than 10 characters"}],codeRules:[function(t){return!!t||"code is required"},function(t){return t&&4===t.length||"code must be 4 characters"}],emailRules:[function(t){return!!t||"E-mail is required"},function(t){return/.+@.+\..+/.test(t)||"E-mail must be valid"}]}},methods:{validate:function(){this.$refs.form.validate(),this.loginReq({email:this.$store.state.user.email,password:this.$store.state.user.password})},reset:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()},marginTop:function(){var t=new RegExp("Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini","i");return t.test(navigator.userAgent)?"100px":"40px"},loginReq:function(t){var e=this;return Object(m["a"])(Object(p["a"])().mark((function s(){var n;return Object(p["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return console.log("make request :",t),s.next=3,fetch("/api/login",{method:"POST",body:JSON.stringify(t)});case 3:n=s.sent,n.ok?(console.log("response = ",n),e.page="signUpIsOk",setTimeout(e.changePage,1500),console.log("okkkk"),console.log("resp = ",n.status)):n.status>299&&n.status<500?(console.log("resp = ",n.status),e.page="wrong"):n.status>500&&console.log("some wrong on backend");case 5:case"end":return s.stop()}}),s)})))()},changePage:function(){window.location.replace("/")},getCookie:function(t){var e="; ".concat(document.cookie),s=e.split("; ".concat(t,"="));if(2===s.length)return s.pop().split(";").shift()}}}),I=_,P=(s("cb8c"),s("8336")),C=s("4bd4"),M=s("8654"),N=Object(c["a"])(I,D,O,!1,null,"57be4f04",null),R=N.exports;u()(N,{VBtn:P["a"],VForm:C["a"],VTextField:M["a"]});var A=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",["signUp"===t.page?s("v-form",{ref:"form",staticClass:"form",style:"margin-top:"+t.marginTop(),attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[s("v-text-field",{attrs:{size:"30px",rules:t.emailRules,label:"E-mail",required:"",solo:""},on:{input:function(e){t.errowMes=""}},model:{value:t.$store.state.user.email,callback:function(e){t.$set(t.$store.state.user,"email",e)},expression:"$store.state.user.email"}}),s("v-text-field",{attrs:{size:"30px",rules:t.loginRules,label:"Login",required:"",solo:""},on:{input:function(e){t.errowMes=""}},model:{value:t.$store.state.user.login,callback:function(e){t.$set(t.$store.state.user,"login",e)},expression:"$store.state.user.login"}}),s("v-text-field",{attrs:{rules:t.passwordRules,label:"Password","append-icon":t.show?"mdi-eye":"mdi-eye-off",type:t.show?"text":"password",solo:""},on:{"click:append":function(e){t.show=!t.show}},model:{value:t.$store.state.user.password,callback:function(e){t.$set(t.$store.state.user,"password",e)},expression:"$store.state.user.password"}}),s("v-btn",{staticClass:"my-2",staticStyle:{height:"40px"},attrs:{color:"primary",disabled:!t.valid},on:{click:t.signUp}},[t._v(" Sign up ")])],1):t._e(),"code"===t.page?s("Code",{on:{changePage:t.changePage}}):t._e(),"errorLogin"===t.errowMes?s("v-form",[s("div",{staticClass:"text-h6",staticStyle:{color:"limegreen"}},[t._v("This login is already exist")])]):t._e(),"errorEmail"===t.errowMes?s("v-form",[s("div",{staticClass:"text-h6",staticStyle:{color:"red"}},[t._v("This Email is already exist")])]):t._e()],1)},V=[],q=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-form",{ref:"form",staticClass:"form",style:"margin-top:"+t.marginTop(),attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[s("h2",{staticStyle:{"margin-bottom":"20px"}},[t._v("Check your email for code")]),s("v-row",{staticStyle:{"margin-bottom":"0"}},[s("v-btn",{attrs:{color:"grey",plain:""},on:{click:function(e){return t.changePage("signUp")}}},[t._v(" change email ")])],1),s("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:"####",expression:"'####'"}],staticStyle:{width:"150px"},attrs:{rules:t.codeRules,label:"X-X-X-X",solo:""},on:{input:t.checkCode},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}}),s("v-btn",{staticStyle:{height:"40px"},attrs:{color:"primary"},on:{click:t.signUp}},[t._v(" reset code ")])],1),"signUpIsOk"===t.page?s("v-form",[s("div",{staticClass:"text-h2",staticStyle:{color:"limegreen"}},[t._v("sign up is successful")])]):t._e(),"wrong"===t.page?s("v-form",[s("div",{staticClass:"text-h2",staticStyle:{color:"red"}},[t._v("bad code")])]):t._e()],1)},z=[],U={name:"code",data:function(){return{wasReq:!1,valid:!0,show:!1,page:"",code:"",loginRules:[function(t){return!!t||"Login is required"},function(t){return t&&t.length<=6||"Login must be less than 4 characters"}],password:"",passwordRules:[function(t){return!!t||"Password is required"},function(t){return t&&t.length<=10||"Password must be less than 10 characters"}],codeRules:[function(t){return!!t||"code is required"},function(t){return t&&4===t.length||"code must be 4 characters"}],emailRules:[function(t){return!!t||"E-mail is required"},function(t){return/.+@.+\..+/.test(t)||"E-mail must be valid"}]}},methods:{checkCode:function(){4!==this.code.length||this.wasReq?this.wasReq=!1:(this.checkCodeReq({token:this.getCookie("codeId"),code:this.code}),this.wasReq=!0,console.log("code = 4"))},signUp:function(){this.$refs.form.validate(),this.signUpReq({email:this.$store.state.user.email,login:this.$store.state.user.login,password:this.$store.state.user.password})},changePage:function(){console.log("replace!!"),window.location.replace("/")},signUpReq:function(t){return Object(m["a"])(Object(p["a"])().mark((function e(){var s;return Object(p["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("make request :",t),e.next=3,fetch("/api/signUp",{method:"POST",body:JSON.stringify(t)});case 3:s=e.sent,s.ok?(console.log("response = ",s),console.log("okkkk")):console.log("not ok");case 5:case"end":return e.stop()}}),e)})))()},checkCodeReq:function(t){var e=this;return Object(m["a"])(Object(p["a"])().mark((function s(){var n;return Object(p["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return console.log("make request :",t),s.next=3,fetch("/api/checkCode",{method:"POST",body:JSON.stringify(t)});case 3:n=s.sent,n.ok?(console.log("response = ",n),console.log("okkkk"),e.page="signUpIsOk",console.log("this.page = 'signUpIsOk'"),setTimeout(e.changePage,1500)):(e.page="wrong",console.log("not ok"));case 5:case"end":return s.stop()}}),s)})))()},marginTop:function(){var t=new RegExp("Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini","i");return t.test(navigator.userAgent)?"100px":"40px"},getCookie:function(t){var e="; ".concat(document.cookie),s=e.split("; ".concat(t,"="));if(2===s.length)return s.pop().split(";").shift()}}},H=U,J=s("0fd9"),F=Object(c["a"])(H,q,z,!1,null,"92d6ab28",null),B=F.exports;u()(F,{VBtn:P["a"],VForm:C["a"],VRow:J["a"],VTextField:M["a"]});var W={name:"signUp",components:{Code:B},data:function(){return{valid:!0,show:!1,page:"signUp",errowMes:"",login:"",email:"",code:"",loginRules:[function(t){return!!t||"Login is required"},function(t){return t&&t.length<=6||"Login must be less than 4 characters"}],password:"",passwordRules:[function(t){return!!t||"Password is required"},function(t){return t&&t.length<=10||"Password must be less than 10 characters"}],codeRules:[function(t){return!!t||"code is required"},function(t){return t&&4===t.length||"code must be 4 characters"}],emailRules:[function(t){return!!t||"E-mail is required"},function(t){return/.+@.+\..+/.test(t)||"E-mail must be valid"}]}},methods:{changePage:function(t){console.log("chenge page = ",t),this.page=t},marginTop:function(){var t=new RegExp("Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini","i");return t.test(navigator.userAgent)?"100px":"40px"},signUp:function(){this.$refs.form.validate(),this.signUpReq({email:this.$store.state.user.email,login:this.$store.state.user.login,password:this.$store.state.user.password}),this.page="code"},signUpReq:function(t){var e=this;return Object(m["a"])(Object(p["a"])().mark((function s(){var n;return Object(p["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return console.log("make request :",t),s.next=3,fetch("/api/signUp",{method:"POST",body:JSON.stringify(t)});case 3:n=s.sent,n.ok?(console.log("response = ",n),console.log("okkkk")):(425===n.status?e.errowMes="errorEmail":426===n.status&&(e.errowMes="errorLogin"),console.log("not ok"));case 5:case"end":return s.stop()}}),s)})))()}}},L=W,Y=Object(c["a"])(L,A,V,!1,null,"0d0b5c3a",null),G=Y.exports;u()(Y,{VBtn:P["a"],VForm:C["a"],VTextField:M["a"]});var X=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",{staticStyle:{padding:"20px"}},[s("div",{staticClass:"content"},[s("AddEvent")],1)])},K=[],Q=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{height:"100%"}},[s("div",{staticStyle:{display:"grid","grid-template-columns":"repeat(2, 1fr)",gap:"20px"}},t._l(t.$store.state.titles,(function(e,n){return s("div",{key:e.title},[s("v-btn",{staticStyle:{height:"100px",width:"100%"},on:{touchstart:function(e){return t.deleteTitleDown("touch")},mousedown:function(e){return t.deleteTitleDown("click")},touchend:function(s){return t.deleteTitleUp(e,n,"touch")},mouseup:function(s){return t.deleteTitleUp(e,n,"click")}}},[t._v(" "+t._s(e.title)+" ")])],1)})),0),s("div",{staticStyle:{"margin-top":"20px",display:"flex","justify-content":"center","text-align":"center"}},[s("v-text-field",{staticStyle:{margin:"20px 20px 20px 0"},attrs:{label:"🥴 новое событие",solo:""},on:{cancel:t.createTitle},model:{value:t.newEvent,callback:function(e){t.newEvent=e},expression:"newEvent"}}),s("v-checkbox",{staticStyle:{"padding-top":"15px","min-width":"130px"},attrs:{label:"with duration"},model:{value:t.isEventWithDuration,callback:function(e){t.isEventWithDuration=e},expression:"isEventWithDuration"}})],1),s("v-btn",{staticStyle:{"margin-top":"-30px",width:"100%",height:"50px"},attrs:{color:"primary"},on:{click:t.createTitle}},[t._v("add")]),s("v-btn",{staticStyle:{"margin-top":"20px",width:"100%",height:"50px"},attrs:{color:"primary"},on:{click:this.openNewTask}},[t._v("new task ")]),t.isNewTask?[s("div",{staticClass:"picker",on:{click:function(e){t.isNewTask=!1}}},[s("div",{staticClass:"picker__content",on:{click:function(t){t.stopPropagation()}}},[t._t("default",(function(){return[s("CreatTask",{on:{isNewTaskChange:t.changeIsNewTask}})]}))],2)])]:t._e(),t.isPickEventDuration?[s("div",{staticClass:"picker",on:{click:function(e){t.isPickEventDuration=!1}}},[s("div",{staticClass:"picker__content",on:{click:function(t){t.stopPropagation()}}},[t._t("default",(function(){return[s("div",[s("h1",[t._v("Plan your event:")]),s("v-row",{attrs:{justify:"space-around",align:"center"}},[s("v-col",{staticStyle:{width:"350px",flex:"0 1 auto"}},[s("h2",[t._v("Start:")]),s("v-time-picker",{attrs:{format:"24hr",max:t.endEventTime},model:{value:t.startEventTime,callback:function(e){t.startEventTime=e},expression:"startEventTime"}})],1),s("v-col",{staticStyle:{width:"350px",flex:"0 1 auto"}},[s("h2",[t._v("End:")]),s("v-time-picker",{attrs:{format:"24hr",min:t.startEventTime},model:{value:t.endEventTime,callback:function(e){t.endEventTime=e},expression:"endEventTime"}}),s("v-btn",{staticClass:"mb-2",staticStyle:{"margin-top":"30px"},attrs:{width:"290px",height:"50px",color:"white"},on:{click:t.addEventWithDuration}},[t._v("save ")])],1)],1)],1)]}))],2)])]:t._e(),[s("v-row",{attrs:{justify:"center"}},[s("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s("v-card",[s("v-card-title",{staticClass:"text-h5"},[t._v(" Delete "+t._s(t.titleToDelete.title)+" ? ")]),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v(" No ")]),s("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(e){t.dialog=!1,t.deleteTitleWithIndex(t.titleIndex)}}},[t._v(" Yes ")])],1)],1)],1)],1)],s("Footer")],2)},Z=[],tt=(s("e323"),s("accc"),s("0d03"),s("6eba"),s("a15b"),s("4e827"),s("a434"),s("d401"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h1",[t._v("Creat your task:")]),[s("v-row",[s("v-col",{attrs:{cols:"12",sm:"6"}},[s("v-date-picker",{attrs:{range:"",color:"black lighten-1"},model:{value:t.datesTask,callback:function(e){t.datesTask=e},expression:"datesTask"}})],1),s("v-col",{attrs:{cols:"12",sm:"6"}},[s("v-text-field",{staticStyle:{"background-color":"white",padding:"20px 20px 0 20px","border-radius":"3px"},attrs:{label:"Date range","prepend-icon":"mdi-calendar",readonly:""},model:{value:t.dateRangeText,callback:function(e){t.dateRangeText=e},expression:"dateRangeText"}})],1)],1)],s("v-text-field",{staticStyle:{"margin-top":"20px"},attrs:{label:"😳 to do ...",solo:""},model:{value:t.taskTitle,callback:function(e){t.taskTitle=e},expression:"taskTitle"}}),s("v-container",{attrs:{"grid-list-md":"","text-xs-center":""}},[s("v-layout",{attrs:{row:"",wrap:""}},[s("v-row",["time"===t.typeOfTaskSelect?[s("v-flex",{staticStyle:{"margin-top":"-10px"},attrs:{xs4:""}},[s("v-text-field",{attrs:{label:"hours",solo:"",rules:t.codeRules},model:{value:t.taskHours,callback:function(e){t.taskHours=e},expression:"taskHours"}})],1),s("v-flex",{staticStyle:{"margin-top":"-10px"},attrs:{xs4:""}},[s("v-text-field",{attrs:{label:"minutes",solo:""},model:{value:t.taskMinutes,callback:function(e){t.taskMinutes=e},expression:"taskMinutes"}})],1)]:t._e(),"my type"===t.typeOfTaskSelect?[s("v-flex",{staticStyle:{"margin-top":"-10px"},attrs:{xs4:""}},[s("v-text-field",{attrs:{label:"count",solo:"",rules:t.codeRules},model:{value:t.taskCount,callback:function(e){t.taskCount=e},expression:"taskCount"}})],1),s("v-flex",{staticStyle:{"margin-top":"-10px"},attrs:{xs4:""}},[s("v-text-field",{attrs:{label:"type",solo:"",rules:t.codeRules},model:{value:t.taskMyType,callback:function(e){t.taskMyType=e},expression:"taskMyType"}})],1)]:t._e(),s("v-flex",{attrs:{xs4:""}},[s("v-select",{staticStyle:{"margin-top":"-10px"},attrs:{items:t.items,label:"time",solo:""},model:{value:t.typeOfTaskSelect,callback:function(e){t.typeOfTaskSelect=e},expression:"typeOfTaskSelect"}})],1)],2)],1)],1),s("v-btn",{staticStyle:{margin:"-10px 0 50px",width:"100%",height:"40px"},attrs:{color:"white"},on:{click:t.creatTask}},[t._v("creat")])],2)}),et=[],st=(s("e25e"),{name:"creatTask",data:function(){return{isNewTask:!1,datesTask:["2019-09-10","2019-09-20"],taskTitle:"",items:["time","my type"],typeOfTaskSelect:"time",taskHours:"",taskMinutes:"",taskCount:"",taskMyType:"",codeRules:[function(t){return!!t||"code is required"},function(t){return t&&t.length<=20||"code must be 4 characters"}]}},computed:{dateRangeText:function(){return this.datesTask.join(" ~ ")}},methods:{creatTask:function(){var t=0,e="";if("time"===this.typeOfTaskSelect){if(isNaN(parseInt(this.taskHours)))return void alert("hours should be integer");if(isNaN(parseInt(this.taskMinutes)))return void alert("minutes should be integer");t=60*(60*parseInt(this.taskHours)+parseInt(this.taskMinutes)),e="time"}else{if(isNaN(parseInt(this.taskCount)))return void alert("count should be integer");t=parseInt(this.taskCount),e=this.taskMyType}if(this.makeDate(this.datesTask[0]).getTime()/1e3>this.makeDate(this.datesTask[1]).getTime()/1e3){var s=this.datesTask[0];this.datesTask[0]=this.datesTask[1],this.datesTask[1]=s}var n={timeStart:this.makeDate(this.datesTask[0],this.makeHoursAndMinutesStr(new Date)).getTime()/1e3,timeEnd:this.makeDate(this.datesTask[1],this.makeHoursAndMinutesStr(new Date)).getTime()/1e3,title:this.taskTitle,target:t,num:0,type:e};this.$store.state.tasks.push(n),localStorage.setItem("tasks",JSON.stringify(this.$store.state.tasks)),this.$store.state.makeReq("/api/newTask","POST",JSON.stringify(n)),console.log(n),this.$emit("isNewTaskChange",!1)},makeHoursAndMinutesStr:function(t){var e=t.getHours(),s=t.getMinutes();return e=1===e.toString().length?"0"+e:e,s=1===s.toString().length?"0"+s:s,e+":"+s},makeDate:function(t,e,s,n){return t=void 0===t?"":t,e=void 0===e?"":"T"+e,void 0!==s&&(s=1===s.toString().length?"0"+s:s),s=void 0===s?"":":"+s,n=void 0===n?"":"."+n,console.log("make Date = ",t+e+s+n),new Date(t+e+s+n)},getCurrentWeek:function(){var t=(new Date).getDay()-1;-1===t&&(t=6);var e=new Date((new Date).getTime()-1e3*t*60*60*24),s=new Date(e.getTime()+5184e5),n=e.getUTCMonth()+1,a=s.getUTCMonth()+1;n=1===n.toString().length?"0"+n:""+n,1===a.toString().length?a="0"+a:n=""+a;var i=e.getUTCDate(),o=s.getUTCDate();i=1===i.toString().length?"0"+i:""+i,o=1===o.toString().length?"0"+o:""+o;var r=e.getFullYear()+"-"+n+"-"+i,c=s.getFullYear()+"-"+a+"-"+o;console.log(r),console.log(c),console.log(new Date(r)),console.log(new Date(c)),this.datesTask=[r,c]}},beforeMount:function(){this.getCurrentWeek()}}),nt=st,at=s("62ad"),it=s("a523"),ot=s("2e4b"),rt=s("0e8f"),ct=s("a722"),lt=s("b974"),ut=Object(c["a"])(nt,tt,et,!1,null,"4ea5d9a6",null),dt=ut.exports;u()(ut,{VBtn:P["a"],VCol:at["a"],VContainer:it["a"],VDatePicker:ot["a"],VFlex:rt["a"],VLayout:ct["a"],VRow:J["a"],VSelect:lt["a"],VTextField:M["a"]});var ht=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-footer",{staticClass:"footer",staticStyle:{"border-radius":"4px"},attrs:{color:"primary lighten-1",padless:""}},[s("v-row",{staticStyle:{"border-radius":"5px"},attrs:{justify:"center","no-gutters":""}},[s("v-btn",{staticClass:"my-2",staticStyle:{display:"flex","margin-right":"50px"},attrs:{color:"white",text:"",rounded:""},on:{click:function(e){return t.$router.push("/add")}}},[t._v("Add Event ")]),s("v-btn",{staticClass:"my-2",attrs:{color:"white",text:"",rounded:""},on:{click:function(e){return t.$router.push("/events")}}},[t._v("Show all ")])],1)],1)},ft=[],vt={name:"Footer",methods:{calcTop:function(){return console.log(document.documentElement.clientHeight),document.documentElement.clientHeight-50}},mounted:function(){this.calcTop()}},pt=vt,mt=(s("de97"),s("553a")),gt=Object(c["a"])(pt,ht,ft,!1,null,"3f986c9a",null),kt=gt.exports;u()(gt,{VBtn:P["a"],VFooter:mt["a"],VRow:J["a"]});var bt={components:{Footer:kt,CreatTask:dt},name:"addEvent",data:function(){return{timePicker:"",selectedEventIndex:-1,newEventToAdd:{},newEvent:"",timerDeleteTitle:!1,timerId:0,dialog:!1,titleToDelete:{},titleIndex:0,titleToDeleteID:-1,isNewTask:!1,startEventTime:null,endEventTime:null,isPickEventDuration:!1,isEventWithDuration:!1,datePicker:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10)}},computed:{dateRangeText:function(){return this.datesTask.join(" ~ ")}},methods:{sortEvents:function(){this.$store.state.events.sort((function(t,e){return t.dt<e.dt?1:-1}))},makeRequest:function(t){return Object(m["a"])(Object(p["a"])().mark((function e(){var s;return Object(p["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("make request :",t),e.next=3,fetch("/api/newEvent",{method:"POST",body:JSON.stringify(t)});case 3:s=e.sent,s.ok?console.log("okkkk"):console.log("not ok");case 5:case"end":return e.stop()}}),e)})))()},addEvent:function(t,e,s){if(console.log("hi addevent. title -",t.title,"\nclick on : ",s),t.withDuration)this.isPickEventDuration=!0,this.startEventTime=this.makeHoursAndMinutesStr(new Date),this.endEventTime=this.makeHoursAndMinutesStr(new Date),this.newEventToAdd={title:t.title,dt:Date.now(),withDuration:t.withDuration};else{var n={title:t.title,dt:Date.now(),withDuration:t.withDuration};this.$store.state.events.push(n),this.makeRequest(n),this.sortEvents(),localStorage.setItem("events",JSON.stringify(this.$store.state.events)),this.page="list"}this.$store.state.titles.splice(e,1),this.$store.state.titles.unshift(t),localStorage.setItem("titles",JSON.stringify(this.$store.state.titles))},addEventWithDuration:function(){var t=new Date;t.setHours(0,0,0,0);var e=t.getMonth().toString().length<2?"0"+(t.getMonth()+1):t.getMonth()+1,s=t.getDate().toString().length<2?"0"+t.getDate():t.getDate();console.log("make start date:",this.makeDate(t.getFullYear()+"-"+e+"-"+s,this.startEventTime,(new Date).getSeconds(),(new Date).getMilliseconds()).getTime());var n={title:this.newEventToAdd.title,dt:this.makeDate(t.getFullYear()+"-"+e+"-"+s,this.startEventTime,(new Date).getSeconds(),(new Date).getMilliseconds()).getTime(),timeStart:this.makeDate(t.getFullYear()+"-"+e+"-"+s,this.startEventTime).getTime(),timeEnd:this.makeDate(t.getFullYear()+"-"+e+"-"+s,this.endEventTime).getTime(),withDuration:this.newEventToAdd.withDuration};console.log("event = ",n),this.$store.state.events.push(n),this.makeRequest(n),console.log(this.$store.state.events),this.startEventTime=null,this.endEventTime=null,this.sortEvents(),localStorage.setItem("events",JSON.stringify(this.$store.state.events)),this.isPickEventDuration=!1,this.page="list"},findIndexEvents:function(t){for(var e=0;e<this.$store.state.events.length;e++)if(this.$store.state.events[e].dt===t)return e;return-1},deleteTitleDown:function(t){"click"===t&&("ontouchstart"in window||navigator.msMaxTouchPoints)||(this.timerId=setTimeout(this.handlerFunc,500))},handlerFunc:function(){this.timerDeleteTitle=!0,console.log("hi")},deleteTitleUp:function(t,e,s){"click"===s&&("ontouchstart"in window||navigator.msMaxTouchPoints)||(this.timerDeleteTitle?(console.log(t,e),this.titleIndex=e,this.titleToDeleteID=t.id,this.titleToDelete=t,this.dialog=!0):this.addEvent(t,e,s),this.timerDeleteTitle=!1,clearTimeout(this.timerId))},deleteTitleWithIndex:function(t){this.$store.state.titles.splice(t,1),this.makeDeleteTitleResp(this.titleToDeleteID),this.$forceUpdate(),localStorage.setItem("titles",JSON.stringify(this.$store.state.titles)),console.log("delete")},createTitle:function(){if(console.log(this.makeDate("2019-09-10")),""!==this.newEvent){var t={title:this.newEvent,withDuration:this.isEventWithDuration};this.makeAddTitleResp(t),this.$store.state.titles.push(t),console.log(this.$store.state.titles),this.newEvent="",this.isEventWithDuration=!1,localStorage.setItem("titles",JSON.stringify(this.$store.state.titles)),this.$forceUpdate()}},makeGetTitlesResp:function(){var t=this;return Object(m["a"])(Object(p["a"])().mark((function e(){var s,n;return Object(p["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/getTitles",{method:"GET"});case 2:if(s=e.sent,!s.ok){e.next=15;break}return e.next=6,s.json();case 6:n=e.sent,null===n&&(n=[]),console.log(n),t.$store.state.titles=n,console.log(t.$store.state.titles),localStorage.setItem("titles",JSON.stringify(t.$store.state.titles)),console.log("okkkk"),e.next=16;break;case 15:s.status>299&&s.status<500?console.log("err"):s.status>500&&console.log("some wrong on backend");case 16:case"end":return e.stop()}}),e)})))()},makeAddTitleResp:function(t){return Object(m["a"])(Object(p["a"])().mark((function e(){var s;return Object(p["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/newTitle",{method:"POST",body:JSON.stringify(t)});case 2:s=e.sent,s.ok?console.log("okkkk"):console.log("not ok");case 4:case"end":return e.stop()}}),e)})))()},makeDeleteTitleResp:function(t){var e=this;return Object(m["a"])(Object(p["a"])().mark((function s(){var n;return Object(p["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,fetch("/api/deleteTitle",{method:"DELETE",body:JSON.stringify({id:t})});case 2:n=s.sent,n.ok?(console.log(e.$store.state.titles),localStorage.setItem("titles",JSON.stringify(e.$store.state.titles)),console.log("okkkk")):n.status>299&&n.status<500?console.log("err"):n.status>500&&console.log("some wrong on backend");case 4:case"end":return s.stop()}}),s)})))()},changeIsNewTask:function(t){this.isNewTask=t},makeHoursAndMinutesStr:function(t){var e=t.getHours(),s=t.getMinutes();return e=1===e.toString().length?"0"+e:e,s=1===s.toString().length?"0"+s:s,e+":"+s},makeDate:function(t,e,s,n){return t=void 0===t?"":t,e=void 0===e?"":"T"+e,void 0!==s&&(s=1===s.toString().length?"0"+s:s),s=void 0===s?"":":"+s,n=void 0===n?"":"."+n,console.log("make Date = ",t+e+s+n),new Date(t+e+s+n)},openNewTask:function(){this.isNewTask=!0}},beforeMount:function(){this.makeGetTitlesResp()}},wt=bt,xt=(s("e405"),s("b0af")),yt=s("99d9"),Tt=s("ac7c"),jt=s("169a"),St=s("2fa4"),Et=s("c964"),$t=Object(c["a"])(wt,Q,Z,!1,null,"12632abb",null),Dt=$t.exports;u()($t,{VBtn:P["a"],VCard:xt["a"],VCardActions:yt["a"],VCardTitle:yt["b"],VCheckbox:Tt["a"],VCol:at["a"],VDialog:jt["a"],VRow:J["a"],VSpacer:St["a"],VTextField:M["a"],VTimePicker:Et["a"]});var Ot={name:"Main",components:{AddEvent:Dt},data:function(){return{page:"add"}},methods:{}},_t=Ot,It=(s("0b7a"),Object(c["a"])(_t,X,K,!1,null,"0f274352",null)),Pt=It.exports;u()(It,{VApp:d["a"]});var Ct=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t._l(this.$store.state.tasks,(function(e){return s("div",{key:e.id},[s("div",{staticStyle:{display:"flex","justify-content":"space-between","margin-top":"20px",padding:"5px"},on:{click:function(e){t.isTaskInfo=!0}}},[s("div",[s("div",{staticStyle:{"font-size":"18px","text-transform":"capitalize",display:"flex","align-items":"center"},style:e.deleted?"opacity: 0.5":""},[t._v(t._s(e.title)+" ")]),s("span",{staticStyle:{color:"#555","font-size":"15px",display:"block","padding-top":"10px"},style:e.deleted?"opacity: 0.5":""},[t._v(t._s(t.timeLeft(new Date(1e3*e.timeEnd)))+" ")])]),s("div",{on:{click:function(t){t.stopPropagation()}}},[e.deleted?s("span",{staticStyle:{color:"#555","font-size":"12px","padding-right":"10px"}},[t._v(t._s(e.waitSeconds)+"с")]):t._e(),e.deleted?t._e():s("v-btn",{attrs:{icon:""},on:{click:function(s){return t.openChangeTask(e.id)}}},[t._v("✏️")]),e.deleted?s("v-btn",{attrs:{text:"",small:""},on:{click:function(s){return t.camebackTask(e.id)}}},[t._v("вернуть ↩︎")]):s("v-btn",{attrs:{icon:""},on:{click:function(s){return t.deleteTask(e.id)}}},[t._v("🗑")]),e.deleted?t._e():s("span",{staticStyle:{color:"#555","font-size":"13px",display:"block","text-align":"right","padding-right":"5px"}},[t._v(" "+t._s(t.calcProgress(e.id))+" ")])],1)]),s("div",{style:{border:"2px solid green",opacity:"0.3"}}),s("div",{style:{position:"relative",top:"-4px",border:"2px solid green",width:t.calcPercent(e)+"%",display:0===t.calcPercent(e)?"none":""}})])})),t.isAddNum?[s("div",{staticClass:"picker",on:{click:function(e){t.isAddNum=!1}}},[s("div",{staticClass:"picker__content",on:{click:function(t){t.stopPropagation()}}},[t._t("default",(function(){return[s("div",{staticStyle:{"background-color":"white",padding:"20px","border-radius":"3px",width:"320px"}},[s("v-container",{attrs:{"grid-list-md":"","text-xs-center":""}},[s("v-layout",{attrs:{row:"",wrap:""}},[s("v-row",[s("div",{staticStyle:{display:"flex","justify-content":"space-between",padding:"5px",color:"#777777",width:"100%"}},[s("div",[s("div",{staticClass:"text-h5",staticStyle:{"max-width":"200px","word-wrap":"break-word"}},[t._v(" "+t._s(t.$store.state.tasks[t.findIndexTasks(t.chosenTaskId)].title)+" ")])]),s("div",{staticStyle:{"white-space":"nowrap"}},[t._v(" "+t._s(t.calcProgress(t.chosenTaskId))+" ")])]),"time"===t.$store.state.tasks[t.findIndexTasks(t.chosenTaskId)].type?[s("v-flex",{attrs:{xs6:""}},[s("v-text-field",{attrs:{label:"hours",outlined:""},model:{value:t.taskHours,callback:function(e){t.taskHours=e},expression:"taskHours"}})],1),s("v-flex",{attrs:{xs6:""}},[s("v-text-field",{attrs:{label:"minutes",outlined:""},model:{value:t.taskMinutes,callback:function(e){t.taskMinutes=e},expression:"taskMinutes"}})],1)]:[s("v-flex",{attrs:{xs12:""}},[s("v-text-field",{attrs:{label:t.$store.state.tasks[t.findIndexTasks(t.chosenTaskId)].type,outlined:""},model:{value:t.taskNum,callback:function(e){t.taskNum=e},expression:"taskNum"}})],1)],s("v-btn",{staticClass:"mb-2",attrs:{width:"290px",height:"50px",color:"white"},on:{click:t.changeTask}},[t._v("add ")])],2)],1)],1)],1)]}))],2)])]:t._e(),t.isTaskInfo?[s("div",{staticClass:"picker",on:{click:function(e){t.isTaskInfo=!1}}},[s("div",{staticClass:"picker__content",on:{click:function(t){t.stopPropagation()}}},[t._t("default",(function(){return[s("h1",[t._v("Hello World")])]}))],2)])]:t._e(),s("Footer")],2)},Mt=[],Nt={name:"ListTasks",components:{Footer:kt},data:function(){return{taskHours:0,taskMinutes:0,taskNum:0,isAddNum:!1,isTaskInfo:!1,chosenTaskId:-1,taskPieces:[]}},methods:{getTasks:function(){var t=this;return Object(m["a"])(Object(p["a"])().mark((function e(){var s,n;return Object(p["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("hi there too"),e.next=3,t.$store.state.makeReq("api/getTasks","GET");case 3:return s=e.sent,e.next=6,s.json();case 6:n=e.sent,console.log("tasls = ",n),null===n&&(n=[]),t.$store.state.tasks=n,console.log("resp = ",t.$store.state.tasks),localStorage.setItem("tasks",JSON.stringify(t.$store.state.tasks)),console.log(t.$store.state.tasks);case 13:case"end":return e.stop()}}),e)})))()},openChangeTask:function(t){this.isAddNum=!0,this.chosenTaskId=t,this.getTaskPieces(),console.log("hi")},getTaskPieces:function(){var t=this;return Object(m["a"])(Object(p["a"])().mark((function e(){var s,n;return Object(p["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.state.makeReq("api/getTaskPieces","POST",JSON.stringify({id:t.chosenTaskId}));case 2:return s=e.sent,e.next=5,s.json();case 5:n=e.sent,console.log("tasls = ",n),null===n&&(n=[]),t.taskPieces=n,console.log("pieces = ",n);case 10:case"end":return e.stop()}}),e)})))()},changeTask:function(){var t=this;return Object(m["a"])(Object(p["a"])().mark((function e(){var s,n,a,i,o,r;return Object(p["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.findIndexTasks(t.chosenTaskId),n=t.$store.state.tasks[s],a=0,i=0,console.log({task:n}),(parseInt(t.taskNum)>0||parseInt(t.taskHours)>=0&&parseInt(t.taskMinutes)>=0)&&("time"===n.type?(console.log("hi there"),console.log("calc = ",parseInt(t.$store.state.tasks[s].num)+parseInt(60*(60*parseInt(t.taskHours)+parseInt(t.taskMinutes)))),a=parseInt(t.$store.state.tasks[s].num)+parseInt(60*(60*parseInt(t.taskHours)+parseInt(t.taskMinutes))),i=parseInt(60*(60*parseInt(t.taskHours)+parseInt(t.taskMinutes)))):(a=parseInt(t.$store.state.tasks[s].num)+parseInt(t.taskNum),i=parseInt(t.taskNum)),t.$store.state.tasks[s].num=a),localStorage.setItem("tasks",JSON.stringify(t.$store.state.tasks)),console.log(n),o={id:n.id,title:n.title,timeStart:n.timeStart,timeEnd:n.timeEnd,type:n.type,target:n.target,num:a,deltaNum:i},e.next=11,t.$store.state.makeReq("api/changeTask","PUT",JSON.stringify(o));case 11:r=e.sent,console.log(r),t.isAddNum=!1,t.taskHours=0,t.taskMinutes=0,t.taskNum=0;case 17:case"end":return e.stop()}}),e)})))()},deleteTask:function(t){var e=this,s=this.findIndexTasks(t),n=this.$store.state.tasks[s],a=3;n.waitSeconds=a;var i=setInterval((function(){if(!n.deleted)return clearInterval(i),localStorage.setItem("tasks",JSON.stringify(e.$store.state.tasks)),void e.$forceUpdate();if(--a<0){clearInterval(i);var s=e.findIndexTasks(t);e.$store.state.makeReq("api/deleteTask","DELETE",JSON.stringify({id:t})),e.$store.state.tasks.splice(s,1)}else n.waitSeconds=a;e.$forceUpdate()}),1e3);n.deleted=Date.now(),this.$forceUpdate(),localStorage.setItem("events",JSON.stringify(this.$store.state.events))},camebackTask:function(t){var e=this.findIndexTasks(t);this.$store.state.tasks[e].deleted=0,this.$forceUpdate()},timeLeft:function(t){return E()(t).fromNow()},calcProgress:function(t){var e=this.$store.state.tasks[this.findIndexTasks(t)];return"time"===e.type?this.makeMinutesAndHoursStr(parseInt(parseInt(e.num)/3600),parseInt(e.num)%3600/60)+" / "+this.makeMinutesAndHoursStr(parseInt(parseInt(e.target)/3600),parseInt(e.target)%3600/60):e.num+" / "+e.target},calcPercent:function(t){var e=0;return void 0!==t.num&&(e=t.num),e/t.target*100>100?100:e/t.target*100},makeMinutesAndHoursStr:function(t,e){return t=1===t.toString().length?"0"+t:t,e=1===e.toString().length?"0"+e:e,t+":"+e},findIndexTasks:function(t){for(var e=0;e<this.$store.state.tasks.length;e++)if(this.$store.state.tasks[e].id===t)return e;return-1}},beforeMount:function(){console.log("hi there"),this.getTasks()}},Rt=Nt,At=(s("720e"),Object(c["a"])(Rt,Ct,Mt,!1,null,"28e66350",null)),Vt=At.exports;u()(At,{VBtn:P["a"],VContainer:it["a"],VFlex:rt["a"],VLayout:ct["a"],VRow:J["a"],VTextField:M["a"]});var qt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.isChangeEvent?[s("div",{staticClass:"picker",on:{click:function(e){t.isChangeEvent=!1}}},[s("div",{staticClass:"picker__content",on:{click:function(t){t.stopPropagation()}}},[t._t("default",(function(){return[s("v-row",{attrs:{justify:"space-around"}},[s("v-col",[s("v-time-picker",{attrs:{format:"24hr"},model:{value:t.timePicker,callback:function(e){t.timePicker=e},expression:"timePicker"}})],1),s("v-col",[s("v-date-picker",{attrs:{color:"primary lighten-1"},model:{value:t.datePicker,callback:function(e){t.datePicker=e},expression:"datePicker"}})],1),s("v-col",[s("v-btn",{staticClass:"mb-4",attrs:{width:"290px",color:"white"},on:{click:t.saveEventChanges}},[t._v("save ")])],1)],1)]}))],2)])]:t._e(),t.isChangeEventWithDuration?[s("div",{staticClass:"picker",on:{click:function(e){t.isChangeEventWithDuration=!1}}},[s("div",{staticClass:"picker__content",on:{click:function(t){t.stopPropagation()}}},[t._t("default",(function(){return[s("div",[s("h1",[t._v("Change your event:")]),s("v-row",{attrs:{justify:"space-around",align:"center"}},[s("v-col",{staticStyle:{width:"350px",flex:"0 1 auto"}},[s("h2",[t._v("Start:")]),s("v-time-picker",{attrs:{format:"24hr",max:t.endEventTime},model:{value:t.startEventTime,callback:function(e){t.startEventTime=e},expression:"startEventTime"}})],1),s("v-col",{staticStyle:{width:"350px",flex:"0 1 auto"}},[s("h2",[t._v("End:")]),s("v-time-picker",{attrs:{format:"24hr",min:t.startEventTime},model:{value:t.endEventTime,callback:function(e){t.endEventTime=e},expression:"endEventTime"}})],1),s("v-col",[s("v-date-picker",{attrs:{color:"primary lighten-1"},model:{value:t.datePicker,callback:function(e){t.datePicker=e},expression:"datePicker"}})],1),s("v-col",[s("v-btn",{staticClass:"mb-2",attrs:{width:"290px",height:"50px",color:"white"},on:{click:t.saveEventWithDurationChanges}},[t._v("save ")])],1)],1)],1)]}))],2)])]:t._e(),t._l(this.$store.state.events,(function(e,n){return s("div",{key:e.id},[t.isNewDay(n)?s("div",{staticStyle:{"margin-top":"20px",color:"#555555"}},[t._v(t._s(t._f("moment")(new Date(e.dt))))]):t._e(),s("div",{staticStyle:{display:"flex","justify-content":"space-between","margin-top":"20px",padding:"5px"}},[s("div",[s("div",{staticStyle:{"font-size":"18px","text-transform":"capitalize",display:"flex","align-items":"center"},style:e.deleted?"opacity: 0.5":""},[t._v(t._s(e.title)+" ")]),e.deleted?t._e():s("span",{staticStyle:{color:"#555","font-size":"11px",display:"block"}},[t._v(t._s(t.getHourAndMinutes(e)))])]),s("div",[e.deleted?s("span",{staticStyle:{color:"#555","font-size":"12px","padding-right":"10px"}},[t._v(t._s(e.waitSeconds)+"с")]):t._e(),0===e.timeStart||void 0===e.timeStart||e.deleted?t._e():s("span",{staticStyle:{color:"#555","font-size":"14px"}},[t._v(" "+t._s(t.printEventDuration(e))+" ")]),e.deleted?t._e():s("v-btn",{attrs:{icon:""},on:{click:function(s){return t.changeEvent(e.id)}}},[t._v("✏️")]),e.deleted?s("v-btn",{attrs:{text:"",small:""},on:{click:function(s){return t.camebackEvent(e.id)}}},[t._v("вернуть ↩︎")]):s("v-btn",{attrs:{icon:""},on:{click:function(s){return t.deleteEvent(e.id)}}},[t._v("🗑")])],1)]),s("div",{style:{border:"2px solid "+t.borderColorForEvent(n),width:t.calcTimePercent(n)+"%"}})])})),s("Footer")],2)},zt=[],Ut=(s("fb6a"),{name:"listEvents",components:{Footer:kt},filters:{moment:function(t){return E()(t).format("D MMMM")}},data:function(){return{isChangeEvent:!1,isChangeEventWithDuration:!1,startEventTime:null,endEventTime:null,eventToChangeId:-1,timePicker:"",percentOfEventTime:0,datePicker:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10)}},computed:{eventsArray:function(){return this.$store.state.events.slice().sort((function(t,e){return t.dt<e.dt?1:-1}))}},methods:{deleteEvent:function(t){var e=this,s=this.findIndexEvents(t),n=this.$store.state.events[s],a=3;n.waitSeconds=a;var i=setInterval((function(){if(!n.deleted)return clearInterval(i),localStorage.setItem("events",JSON.stringify(e.$store.state.events)),void e.$forceUpdate();if(--a<0){clearInterval(i);var s=e.findIndexEvents(t);e.deleteEventFromBD(t),e.$store.state.events.splice(s,1)}else n.waitSeconds=a;e.$forceUpdate()}),1e3);n.deleted=Date.now(),this.$forceUpdate(),localStorage.setItem("events",JSON.stringify(this.$store.state.events))},camebackEvent:function(t){var e=this.findIndexEvents(t);this.$store.state.events[e].deleted=0,this.$forceUpdate()},changeEvent:function(t){var e=this.findIndexEvents(t),s=new Date(this.$store.state.events[e].dt);if(this.selectedEventIndex=e,0!==this.$store.state.events[e].timeEnd){var n=new Date(this.$store.state.events[e].timeStart),a=new Date(this.$store.state.events[e].timeEnd);this.startEventTime=this.makeHoursAndMinutesStr(n),this.endEventTime=this.makeHoursAndMinutesStr(a),this.datePicker=new Date(s-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),console.log(this.startEventTime),console.log(this.endEventTime),this.isChangeEventWithDuration=!0}else this.timePicker=this.makeHoursAndMinutesStr(s),this.datePicker=new Date(s-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),this.isChangeEvent=!0,this.$forceUpdate()},saveEventWithDurationChanges:function(){var t=this.makeDate(this.datePicker,this.startEventTime),e=this.makeDate(this.datePicker,this.endEventTime);this.$store.state.events[this.selectedEventIndex].timeStart=t.getTime()+this.$store.state.events[this.selectedEventIndex].dt%1e3,this.$store.state.events[this.selectedEventIndex].timeEnd=e.getTime()+this.$store.state.events[this.selectedEventIndex].dt%1e3,this.$store.state.events[this.selectedEventIndex].dt=this.$store.state.events[this.selectedEventIndex].timeStart,this.changeEventFromBD(this.$store.state.events[this.selectedEventIndex]),localStorage.setItem("events",JSON.stringify(this.$store.state.events)),this.isChangeEventWithDuration=!1,this.sortEvents()},saveEventChanges:function(){var t=this.makeDate(this.datePicker,this.timePicker);this.$store.state.events[this.selectedEventIndex].dt=t.getTime()+this.$store.state.events[this.selectedEventIndex].dt%1e3,this.changeEventFromBD(this.$store.state.events[this.selectedEventIndex]),localStorage.setItem("events",JSON.stringify(this.$store.state.events)),this.isChangeEvent=!1,this.sortEvents()},calcTimePercent:function(t){if(0===this.$store.state.events[t].timeEnd)return 100;if(this.$store.state.events[t].timeEnd-this.$store.state.events[t].timeStart<=0)return 0;for(var e=0,s=0;s<this.eventsArray.length;s++)new Date(this.$store.state.events[s].dt).getDate()===new Date(this.$store.state.events[t].dt).getDate()&&0!==this.$store.state.events[s].timeStart&&(e+=this.$store.state.events[s].timeEnd-this.$store.state.events[s].timeStart);return this.percentOfEventTime=(this.$store.state.events[t].timeEnd-this.$store.state.events[t].timeStart)/e*100},getEvents:function(){var t=this;return Object(m["a"])(Object(p["a"])().mark((function e(){var s,n;return Object(p["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/getEvents",{method:"GET"});case 2:if(s=e.sent,!s.ok){e.next=14;break}return e.next=6,s.json();case 6:n=e.sent,t.$store.state.events=n,console.log(t.$store.state.events),t.sortEvents(),localStorage.setItem("events",JSON.stringify(t.$store.state.events)),console.log("okkkk"),e.next=15;break;case 14:s.status>299&&s.status<500?console.log("err"):s.status>500&&console.log("some wrong on backend");case 15:case"end":return e.stop()}}),e)})))()},changeEventFromBD:function(t){var e=this;return Object(m["a"])(Object(p["a"])().mark((function s(){var n;return Object(p["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,fetch("/api/changeEvent",{method:"PUT",body:JSON.stringify(t)});case 2:n=s.sent,n.ok?(console.log(e.$store.state.events),e.sortEvents(),localStorage.setItem("events",JSON.stringify(e.$store.state.events)),console.log("okkkk")):n.status>299&&n.status<500?console.log("err"):n.status>500&&console.log("some wrong on backend");case 4:case"end":return s.stop()}}),s)})))()},deleteEventFromBD:function(t){var e=this;return Object(m["a"])(Object(p["a"])().mark((function s(){var n;return Object(p["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,fetch("/api/deleteEvent",{method:"DELETE",body:JSON.stringify({id:t})});case 2:n=s.sent,n.ok?(console.log(e.$store.state.events),e.sortEvents(),localStorage.setItem("events",JSON.stringify(e.$store.state.events)),console.log("okkkk")):n.status>299&&n.status<500?console.log("err"):n.status>500&&console.log("some wrong on backend");case 4:case"end":return s.stop()}}),s)})))()},borderColorForEvent:function(t){return 0===this.$store.state.events[t].timeStart?"none":"green"},sortEvents:function(){this.$store.state.events=this.$store.state.events.slice().sort((function(t,e){return t.dt<e.dt?1:-1}))},isNewDay:function(t){return 0===t||(console.log(t,new Date(this.eventsArray[t-1].dt).getDate(),new Date(this.eventsArray[t].dt).getDate()),new Date(this.eventsArray[t-1].dt).getDate()!==new Date(this.eventsArray[t].dt).getDate())},printEventDuration:function(t){var e=Math.floor((t.timeEnd-t.timeStart)/36e5),s=Math.floor((t.timeEnd-t.timeStart)%36e5/6e4);return s=1===s.toString().length?"0"+s:s,e+":"+s},getHourAndMinutes:function(t){return 0===t.timeEnd||void 0===t.timeEnd?this.makeHoursAndMinutesStr(new Date(t.dt)):this.makeHoursAndMinutesStr(new Date(t.dt))+" - "+this.makeHoursAndMinutesStr(new Date(t.timeEnd))},getEndOfEventStr:function(t){return this.makeHoursAndMinutesStr(new Date(t.timeEnd))},makeHoursAndMinutesStr:function(t){var e=t.getHours(),s=t.getMinutes();return e=1===e.toString().length?"0"+e:e,s=1===s.toString().length?"0"+s:s,e+":"+s},makeDate:function(t,e,s,n){return t=void 0===t?"":t,e=void 0===e?"":"T"+e,void 0!==s&&(s=1===s.length?"0"+s:s),s=void 0===s?"":":"+s,n=void 0===n?"":"."+n,console.log("make Date = ",t+e+s+n),new Date(t+e+s+n)},findIndexEvents:function(t){for(var e=0;e<this.$store.state.events.length;e++)if(this.$store.state.events[e].id===t)return e;return-1}},beforeMount:function(){this.getEvents()}}),Ht=Ut,Jt=(s("9d3c"),Object(c["a"])(Ht,qt,zt,!1,null,"430bd815",null)),Ft=Jt.exports;u()(Jt,{VBtn:P["a"],VCol:at["a"],VDatePicker:ot["a"],VRow:J["a"],VTimePicker:Et["a"]});var Bt=new $["a"]({mode:"history",routes:[{path:"/",component:Pt},{path:"/login",component:R},{path:"/signUp",component:G},{path:"/add",component:Dt},{path:"/events",component:Ft},{path:"/tasks",component:Vt}]}),Wt=s("2ead"),Lt=s.n(Wt),Yt=s("3a60"),Gt=s.n(Yt);n["a"].use($["a"]),n["a"].use(y.a),n["a"].use(E.a),n["a"].prototype.$moment=E.a,n["a"].use(Gt.a),n["a"].config.productionTip=!1,new n["a"]({store:w,vuetify:j,render:function(t){return t(f)},router:Bt,VueMoment:Lt.a}).$mount("#app")},"60f5":function(t,e,s){},"720e":function(t,e,s){"use strict";s("e09e")},"9d3c":function(t,e,s){"use strict";s("fa01")},a1c2:function(t,e,s){},b3d5:function(t,e,s){},cb8c:function(t,e,s){"use strict";s("18b6")},de97:function(t,e,s){"use strict";s("60f5")},e09e:function(t,e,s){},e405:function(t,e,s){"use strict";s("b3d5")},fa01:function(t,e,s){}});
//# sourceMappingURL=app.8f9d2d65.js.map